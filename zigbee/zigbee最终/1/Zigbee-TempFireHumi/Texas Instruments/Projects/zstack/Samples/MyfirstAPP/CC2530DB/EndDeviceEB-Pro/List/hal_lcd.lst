###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.3.10338/W32 for 8051         16/Dec/2014  18:18:08 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  E:\Zigbee-timer\Texas Instruments\Components\hal\t #
#                          arget\CC2530EB\hal_lcd.c                           #
#    Command line       =  -f "E:\Zigbee-timer\Texas                          #
#                          Instruments\Projects\zstack\Samples\MyfirstAPP\CC2 #
#                          530DB\..\..\..\Tools\CC2530DB\f8wEndev.cfg"        #
#                          (-DCPU32MHZ -DROOT=__near_func -DBLINK_LEDS) -f    #
#                          "E:\Zigbee-timer\Texas Instruments\Projects\zstack #
#                          \Samples\MyfirstAPP\CC2530DB\..\..\..\Tools\CC2530 #
#                          DB\f8wConfig.cfg" (-DSECURE=0                      #
#                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                  #
#                          -DDEFAULT_CHANLIST=0x02000000                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xA1B2                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116 "-DCONST=const __code"    #
#                          -DGENERIC=__generic -DRFD_RCVC_ALWAYS_ON=FALSE     #
#                          -DPOLL_RATE=1000 -DQUEUED_POLL_RATE=100            #
#                          -DRESPONSE_POLL_RATE=100) -DREJOIN_POLL_RATE=440   #
#                          "E:\Zigbee-timer\Texas Instruments\Components\hal\ #
#                          target\CC2530EB\hal_lcd.c" -D ZIGBEEPRO -D         #
#                          NWK_AUTO_POLL -D ZTOOL_P1 -D MT_TASK -D            #
#                          MT_SYS_FUNC -D MT_ZDO_FUNC -D LCD_SUPPORTED=DEBUG  #
#                          -D xPOWER_SAVING -lC "E:\Zigbee-timer\Texas        #
#                          Instruments\Projects\zstack\Samples\MyfirstAPP\CC2 #
#                          530DB\EndDeviceEB-Pro\List\" -lA                   #
#                          "E:\Zigbee-timer\Texas Instruments\Projects\zstack #
#                          \Samples\MyfirstAPP\CC2530DB\EndDeviceEB-Pro\List\ #
#                          " --diag_suppress Pe001,Pa010 -o                   #
#                          "E:\Zigbee-timer\Texas Instruments\Projects\zstack #
#                          \Samples\MyfirstAPP\CC2530DB\EndDeviceEB-Pro\Obj\" #
#                           -e --debug --core=plain --dptr=16,1               #
#                          --data_model=large --code_model=banked             #
#                          --calling_convention=xdata_reentrant               #
#                          --place_constants=data_rom --nr_virtual_regs 8 -I  #
#                          "E:\Zigbee-timer\Texas Instruments\Projects\zstack #
#                          \Samples\MyfirstAPP\CC2530DB\" -I                  #
#                          "E:\Zigbee-timer\Texas Instruments\Projects\zstack #
#                          \Samples\MyfirstAPP\CC2530DB\..\SOURCE\" -I        #
#                          "E:\Zigbee-timer\Texas Instruments\Projects\zstack #
#                          \Samples\MyfirstAPP\CC2530DB\..\..\..\ZMAIN\TI2530 #
#                          DB\" -I "E:\Zigbee-timer\Texas                     #
#                          Instruments\Projects\zstack\Samples\MyfirstAPP\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\MT\" -I            #
#                          "E:\Zigbee-timer\Texas Instruments\Projects\zstack #
#                          \Samples\MyfirstAPP\CC2530DB\..\..\..\..\..\COMPON #
#                          ENTS\HAL\INCLUDE\" -I "E:\Zigbee-timer\Texas       #
#                          Instruments\Projects\zstack\Samples\MyfirstAPP\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\HAL\TARGET\CC2530E #
#                          B\" -I "E:\Zigbee-timer\Texas                      #
#                          Instruments\Projects\zstack\Samples\MyfirstAPP\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\OSAL\MCU\CCSOC\"   #
#                          -I "E:\Zigbee-timer\Texas                          #
#                          Instruments\Projects\zstack\Samples\MyfirstAPP\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\OSAL\INCLUDE\" -I  #
#                          "E:\Zigbee-timer\Texas Instruments\Projects\zstack #
#                          \Samples\MyfirstAPP\CC2530DB\..\..\..\..\..\COMPON #
#                          ENTS\STACK\AF\" -I "E:\Zigbee-timer\Texas          #
#                          Instruments\Projects\zstack\Samples\MyfirstAPP\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\STACK\NWK\" -I     #
#                          "E:\Zigbee-timer\Texas Instruments\Projects\zstack #
#                          \Samples\MyfirstAPP\CC2530DB\..\..\..\..\..\COMPON #
#                          ENTS\STACK\SEC\" -I "E:\Zigbee-timer\Texas         #
#                          Instruments\Projects\zstack\Samples\MyfirstAPP\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\STACK\SAPI\" -I    #
#                          "E:\Zigbee-timer\Texas Instruments\Projects\zstack #
#                          \Samples\MyfirstAPP\CC2530DB\..\..\..\..\..\COMPON #
#                          ENTS\STACK\SYS\" -I "E:\Zigbee-timer\Texas         #
#                          Instruments\Projects\zstack\Samples\MyfirstAPP\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\STACK\ZDO\" -I     #
#                          "E:\Zigbee-timer\Texas Instruments\Projects\zstack #
#                          \Samples\MyfirstAPP\CC2530DB\..\..\..\..\..\COMPON #
#                          ENTS\ZMAC\F8W\" -I "E:\Zigbee-timer\Texas          #
#                          Instruments\Projects\zstack\Samples\MyfirstAPP\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\ZMAC\" -I          #
#                          "E:\Zigbee-timer\Texas Instruments\Projects\zstack #
#                          \Samples\MyfirstAPP\CC2530DB\..\..\..\..\..\COMPON #
#                          ENTS\SERVICES\SADDR\" -I "E:\Zigbee-timer\Texas    #
#                          Instruments\Projects\zstack\Samples\MyfirstAPP\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\SERVICES\SDATA\"   #
#                          -I "E:\Zigbee-timer\Texas                          #
#                          Instruments\Projects\zstack\Samples\MyfirstAPP\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\MAC\INCLUDE\" -I   #
#                          "E:\Zigbee-timer\Texas Instruments\Projects\zstack #
#                          \Samples\MyfirstAPP\CC2530DB\..\..\..\..\..\COMPON #
#                          ENTS\MAC\HIGH_LEVEL\" -I "E:\Zigbee-timer\Texas    #
#                          Instruments\Projects\zstack\Samples\MyfirstAPP\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\MAC\LOW_LEVEL\srf0 #
#                          4\" -I "E:\Zigbee-timer\Texas                      #
#                          Instruments\Projects\zstack\Samples\MyfirstAPP\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\MAC\LOW_LEVEL\srf0 #
#                          4\SINGLE_CHIP\" -Ohz --require_prototypes          #
#    List file          =  E:\Zigbee-timer\Texas Instruments\Projects\zstack\ #
#                          Samples\MyfirstAPP\CC2530DB\EndDeviceEB-Pro\List\h #
#                          al_lcd.lst                                         #
#    Object file        =  E:\Zigbee-timer\Texas Instruments\Projects\zstack\ #
#                          Samples\MyfirstAPP\CC2530DB\EndDeviceEB-Pro\Obj\ha #
#                          l_lcd.r51                                          #
#                                                                             #
#                                                                             #
###############################################################################

E:\Zigbee-timer\Texas Instruments\Components\hal\target\CC2530EB\hal_lcd.c
      1          #include "LCD128_64.h"

   \                                 In  segment SFR_AN, at 0x80
   \   union <unnamed> volatile __sfr _A_P0
   \                     _A_P0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0x90
   \   union <unnamed> volatile __sfr _A_P1
   \                     _A_P1:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xa0
   \   union <unnamed> volatile __sfr _A_P2
   \                     _A_P2:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfe
   \   unsigned char volatile __sfr P1DIR
   \                     P1DIR:
   \   000000                DS 1
      2          #include "Font.h"
      3          #include "hal_lcd.h"
      4          #include "OSAL.h"
      5          #include "string.h"
      6          
      7          /****************************************************
      8          * B) Command Table per device *
      9          ****************************************************/
     10          #define 	DisplayOff 	0xAE
     11          #define 	DisplayOn 	0xAF
     12          #define 	DisplayStart 	0x40
     13          #define 	PageAddr 	0xB0
     14          #define 	ColAddrHi 	0x10
     15          #define 	ColAddrLo 	0x00
     16          #define 	SegRemapOff 	0xA0
     17          #define 	SegRemapOn 	0xA1
     18          #define 	NormalDisp 	0xA6
     19          #define 	ReverseDisp 	0xA7
     20          #define 	ExitEntireD 	0xA4
     21          #define 	EntEntireD 	0xA5
     22          #define 	EnterRMW 	0xE0
     23          #define 	ExitRMW 	0xEE
     24          #define 	SWRest 		0xE2
     25          #define 	ComRemapOff 	0xC0
     26          #define 	ComRemapOn 	0xC8
     27          #define 	PwrCtrlReg 	0x28
     28          #define 	OPampBuffer 	0x01
     29          #define 	IntReg 		0x02
     30          #define 	IntVolBstr 	0x04
     31          #define 	IntRegRatio 	0x20
     32          #define 	ContCtrlReg 	0x81
     33          #define 	CmdMuxRatio 	0x48
     34          #define 	CmdBiasRatio 	0x50
     35          #define 	DispOffset 	0x44
     36          #define 	IconModeOn 	0xA3
     37          #define 	IconModeOff 	0xA2
     38          #define 	NlineInver 	0x4C
     39          #define 	DCDCconver 	0x64
     40          #define 	PowersavStandby 0xA8
     41          #define 	PowersavSleep 	0xA9
     42          #define 	PowersavOff 	0xE1
     43          #define 	InterOsc 	0xAB
     44          #define 	Device SSD1821 			/* device under demo */
     45          #define 	ColNo 		132 		/* number of Column/Seg on LCD glass*/
     46          #define 	RowNo 		64		/* number of Row/Com/Mux */
     47          #define 	PS 		1 		/* fixed to Parallel mode */
     48          #define 	PageNo 		10 		/* Total no of RAM pages */
     49          #define 	IconPage 	10 		/* Icon Page number */
     50          #define 	All0 		6 		/* 3 for all 0, 4 for all 1 */
     51          #define 	All1 		4
     52          #define 	iIntRegValue 	1 		/*Internal Regulator Resistor Ratio Value */
     53          #define 	iContCtrlRegValue 16 		/* Contrast Control Register Value */
     54          #define 	iIntRegValuea 	20 		/*Internal Regulator Resistor Ratio Value */
     55          #define 	iContCtrlRegValuea 16 		/* Contrast Control Register Value */
     56          #define 	iIntRegValueb 	1 		/*Internal Regulator Resistor Ratio Value */
     57          #define 	iContCtrlRegValueb 16 		/* Contrast Control Register Value */
     58          #define 	MSGNo 		16
     59          #define 	MSGLength 	22
     60          #define 	SSLNameNo 	4
     61          #define 	DevicePg 	0 		//RAM page for showing device name
     62          #define 	FeaturePg 	1 		//RAM page for showing feature
     63          #define 	GRAPHICNo 	13
     64          #define 	xlogo 		38
     65          #define 	ylogo 		5
     66          #define 	xsolomon 	91
     67          #define 	ysolomon 	2
     68          #define 	xsystech 	81
     69          #define 	ysystech 	2
     70          #define 	xlimited 	70
     71          #define 	ylimited 	2
     72          #define 	xcc 		16
     73          #define 	ycc 		2
     74          #define 	xpageq 		128
     75          #define 	ypageq 		4
     76          #define 	horizonal 	0
     77          #define 	d_time 		60
     78          ////////////////////////////////////////////////////////////////////////////////////////////
     79          #define  CS   P1_6     //片选信号
     80          #define  SID  P1_5     //数据信号
     81          #define  SCLK P1_4     //时钟信号
     82          
     83          
     84          void Print8(uint16 y,uint16 x, uint8 ch[],uint16 yn);
     85          

   \                                 In  segment XDATA_I, align 1, keep-with-next
     86          uint8 ContrastValue =90;
   \                     ContrastValue:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for ContrastValue>`
   \   000001                REQUIRE __INIT_XDATA_I
     87          void WriteLCD(uint8 fs, uint8 da);
     88          void Write595(uint8 dat);
     89          void delay_us(uint16 s);
     90          void delay1(uint8 jj);
     91          void contrastctrl(uint8 start, uint8 stop);
     92          void HalLcdInit(void);
     93          void PrintCh8(uint16 y,uint16 x, uint8 ch,uint16 yn);
     94          void upLcd( char *ptr,uint8 op );
     95          void HalLcdClearLine( uint8 line );
     96          //****************自己加的********************************
     97          void write_data(unsigned char Dispdata);
     98          void write_com(unsigned char cmdcode);
     99          void sendbyte(unsigned char zdata);
    100          void delay(unsigned int t);
    101          void print_LCDdata(char  *dsp);
    102          void kaijijiemian(void);
    103          void Test(void);
    104          void Router_Join(unsigned char s);
    105          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    106          int i=0;
   \                     i:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    107          
    108          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    109          void delay1(uint8 jj)
   \                     delay1:
    110          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    111          	uint8 i;
    112          	for(i=0; i<jj; i++);
   \   000000   7800         MOV     R0,#0x0
   \   000002   8001         SJMP    ??delay1_0
   \                     ??delay1_1:
   \   000004   08           INC     R0
   \                     ??delay1_0:
   \   000005   E8           MOV     A,R0
   \   000006   C3           CLR     C
   \   000007   99           SUBB    A,R1
   \   000008   40FA         JC      ??delay1_1
    113          }
   \   00000A   02....       LJMP    ?BRET
    114          
    115          
    116          
    117          
    118          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    119          void delay_us(uint16 s)
   \                     delay_us:
    120          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    121          	uint16 i;
    122          	for(i=0; i<s; i++);
   \   000000   7800         MOV     R0,#0x0
   \   000002   7900         MOV     R1,#0x0
   \   000004   8003         SJMP    ??CrossCallReturnLabel_6
   \                     ??delay_us_0:
   \   000006   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_6:
   \   000009   C3           CLR     C
   \   00000A   E8           MOV     A,R0
   \   00000B   9A           SUBB    A,R2
   \   00000C   E9           MOV     A,R1
   \   00000D   9B           SUBB    A,R3
   \   00000E   40F6         JC      ??delay_us_0
    123          	for(i=0; i<s; i++);
   \   000010   7800         MOV     R0,#0x0
   \   000012   7900         MOV     R1,#0x0
   \   000014   8003         SJMP    ??CrossCallReturnLabel_7
   \                     ??delay_us_1:
   \   000016   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_7:
   \   000019   C3           CLR     C
   \   00001A   E8           MOV     A,R0
   \   00001B   9A           SUBB    A,R2
   \   00001C   E9           MOV     A,R1
   \   00001D   9B           SUBB    A,R3
   \   00001E   40F6         JC      ??delay_us_1
    124                  for(i=0; i<s; i++);
   \   000020   7800         MOV     R0,#0x0
   \   000022   7900         MOV     R1,#0x0
   \   000024   8003         SJMP    ??CrossCallReturnLabel_8
   \                     ??delay_us_2:
   \   000026   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_8:
   \   000029   C3           CLR     C
   \   00002A   E8           MOV     A,R0
   \   00002B   9A           SUBB    A,R2
   \   00002C   E9           MOV     A,R1
   \   00002D   9B           SUBB    A,R3
   \   00002E   40F6         JC      ??delay_us_2
    125          	for(i=0; i<s; i++);
   \   000030   7800         MOV     R0,#0x0
   \   000032   7900         MOV     R1,#0x0
   \   000034   8003         SJMP    ??CrossCallReturnLabel_9
   \                     ??delay_us_3:
   \   000036   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_9:
   \   000039   C3           CLR     C
   \   00003A   E8           MOV     A,R0
   \   00003B   9A           SUBB    A,R2
   \   00003C   E9           MOV     A,R1
   \   00003D   9B           SUBB    A,R3
   \   00003E   40F6         JC      ??delay_us_3
    126          }
   \   000040   02....       LJMP    ?BRET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   E8           MOV     A,R0
   \   000001   2401         ADD     A,#0x1
   \   000003   08           INC     R0
   \   000004   E9           MOV     A,R1
   \   000005   3400         ADDC    A,#0x0
   \   000007   F9           MOV     R1,A
   \   000008   22           RET
    127          
    128          
    129          //******************************************************************************
    130          //函数名：void Write595(uint8 dat)
    131          //输入：数据
    132          //输出：无
    133          //功能描述：595写数据，一次写入8位
    134          //******************************************************************************

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    135          void Write595(uint8 dat)
   \                     Write595:
    136          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    137          	
    138          	uint8 ii;		
    139          			
    140          	for(ii = 0 ; ii < 8; ii++)
   \   000000   7808         MOV     R0,#0x8
    141          	{
    142          		if(dat & 0x80) 	LCD_595_DAT = 1;
   \                     ??Write595_0:
   \   000002   E9           MOV     A,R1
   \   000003   A2E7         MOV     C,0xE0 /* A   */.7
   \   000005   5004         JNC     ??Write595_1
   \   000007   D2A0         SETB    0xa0.0
   \   000009   8002         SJMP    ??Write595_2
    143          		else		LCD_595_DAT = 0;
   \                     ??Write595_1:
   \   00000B   C2A0         CLR     0xa0.0
    144          		
    145          		dat <<= 1;
   \                     ??Write595_2:
   \   00000D   C3           CLR     C
   \   00000E   33           RLC     A
   \   00000F   F9           MOV     R1,A
    146          		LCD_595_CK = 1;	
   \   000010   D295         SETB    0x90.5
    147          		LCD_595_CK = 0;
   \   000012   C295         CLR     0x90.5
    148          	}
   \   000014   18           DEC     R0
   \   000015   E8           MOV     A,R0
   \   000016   70EA         JNZ     ??Write595_0
    149          	LCD_595_LD = 1;
   \   000018   D293         SETB    0x90.3
    150          	LCD_595_LD = 0;
   \   00001A   C293         CLR     0x90.3
    151          }
   \   00001C   02....       LJMP    ?BRET
   \   00001F                REQUIRE _A_P2
   \   00001F                REQUIRE _A_P1
    152          
    153          
    154          
    155          
    156          //*****************************************************************************
    157          //*****************************************************************************
    158          //函数名：void delay(unsigned int n)
    159          //功能描述：普通廷时函数
    160          //*****************************************************************************

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    161          void WriteLCD(uint8 fs, uint8 da)
   \                     WriteLCD:
    162          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FF           MOV     R7,A
   \   000007   EA           MOV     A,R2
   \   000008   FE           MOV     R6,A
    163          	delay1(2);
   \   000009                ; Setup parameters for call to function delay1
   \   000009   7902         MOV     R1,#0x2
   \   00000B   12....       LCALL   ??delay1?relay
    164          	LCD_CS1 = 0;
   \   00000E   C294         CLR     0x90.4
    165          	LCD_RW = 0;			//写操作
   \   000010   C281         CLR     0x80.1
    166          	//delay1(0);	
    167          
    168          	if(fs){
   \   000012   EF           MOV     A,R7
   \   000013   6004         JZ      ??WriteLCD_0
    169          		LCD_RS = 1;	
   \   000015   D297         SETB    0x90.7
   \   000017   8002         SJMP    ??WriteLCD_1
    170          	}
    171          	else{
    172          		LCD_RS = 0;
   \                     ??WriteLCD_0:
   \   000019   C297         CLR     0x90.7
    173          	}
    174                 // delay1(0);
    175          
    176                  Write595(da);
   \                     ??WriteLCD_1:
   \   00001B                ; Setup parameters for call to function Write595
   \   00001B   EE           MOV     A,R6
   \   00001C   F9           MOV     R1,A
   \   00001D   12....       LCALL   ??Write595?relay
    177          	LCD_E = 1;// = 1;
   \   000020   D296         SETB    0x90.6
    178                  delay1(2);
   \   000022                ; Setup parameters for call to function delay1
   \   000022   7902         MOV     R1,#0x2
   \   000024   12....       LCALL   ??delay1?relay
    179          	LCD_E = 0;// = 0;					
   \   000027   C296         CLR     0x90.6
    180          	//delay1(0);
    181          	LCD_CS1 = 1;
   \   000029   D294         SETB    0x90.4
    182          }
   \   00002B   02....       LJMP    ??Subroutine21_0 & 0xFFFF
   \   00002E                REQUIRE _A_P1
   \   00002E                REQUIRE _A_P0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine21_0:
   \   000000   7F01         MOV     R7,#0x1
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA
    183          /*
    184          //原来被屏蔽的程序
    185          uint8 ReadLCD(uint8 fs)
    186          {
    187          	uint8 temp = 0;
    188          	LCD_CS1 = 0;
    189          	NOP;
    190          	NOP;
    191          	NOP;
    192          	NOP;
    193          	do{						
    194          		LCD_RW = 1;
    195          		LCD_RS = 0;
    196          		LCD_E = 1;
    197          		NOP;
    198          		NOP;							
    199          		temp = P1 & 0x80;			
    200          		LCD_E = 0;			
    201          
    202          	}while(temp != 0);	
    203          
    204          	if(fs){
    205          		LCD_RS = 1;	
    206          	}
    207          	else{
    208          		LCD_RS = 0;
    209          	}
    210          	
    211          	LCD_E = 1;
    212          	NOP;	
    213          	NOP;
    214          	NOP;
    215          	NOP;	
    216          	temp = P1;	
    217          	LCD_E = 0;	
    218          	LCD_CS1 = 1;
    219          	return(temp);
    220          }
    221          
    222          
    223          */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    224          void SetRamAddr(uint8 x ,uint8 y)
   \                     SetRamAddr:
    225          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
   \   000007   EA           MOV     A,R2
   \   000008   FF           MOV     R7,A
    226          	uint8 temp;
    227          	
    228          	temp = 0x0f & x;
    229          	WriteLCD(COMMAND , PageAddr|temp);
   \   000009                ; Setup parameters for call to function WriteLCD
   \   000009   740F         MOV     A,#0xf
   \   00000B   5E           ANL     A,R6
   \   00000C   44B0         ORL     A,#0xb0
   \   00000E   FA           MOV     R2,A
   \   00000F   7900         MOV     R1,#0x0
   \   000011   12....       LCALL   ??WriteLCD?relay
    230          
    231          	temp = 0x0f & (y >> 4);
    232          	WriteLCD(COMMAND , ColAddrHi|temp);
   \   000014                ; Setup parameters for call to function WriteLCD
   \   000014   EF           MOV     A,R7
   \   000015   C4           SWAP    A
   \   000016   540F         ANL     A,#0xf
   \   000018   4410         ORL     A,#0x10
   \   00001A   FA           MOV     R2,A
   \   00001B   7900         MOV     R1,#0x0
   \   00001D   12....       LCALL   ??WriteLCD?relay
    233          	temp = 0x0f & y;
    234          	WriteLCD(COMMAND , ColAddrLo|temp);
   \   000020                ; Setup parameters for call to function WriteLCD
   \   000020   740F         MOV     A,#0xf
   \   000022   02....       LJMP    ?Subroutine1 & 0xFFFF
    235          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   5F           ANL     A,R7
   \   000001   FA           MOV     R2,A
   \   000002   7900         MOV     R1,#0x0
   \   000004   12....       LCALL   ??WriteLCD?relay
   \   000007                REQUIRE ??Subroutine21_0
   \   000007                ; // Fall through to label ??Subroutine21_0
    236          
    237          
    238          /*******************************************************************************
    239          //函数名：void SetContrast(uint8 Gain, uint8 Step)
    240          //功能：lcd对比度设定
    241          //输入：Page-页，Col-列
    242          //输出：无
    243          ********************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    244          void SetContrast(uint8 Gain, uint8 Step)
   \                     SetContrast:
    245          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
   \   000007   EA           MOV     A,R2
   \   000008   FF           MOV     R7,A
    246          	WriteLCD(COMMAND , IntRegRatio | (0x0f & Gain)); 	//设定内部电阻
   \   000009                ; Setup parameters for call to function WriteLCD
   \   000009   740F         MOV     A,#0xf
   \   00000B   5E           ANL     A,R6
   \   00000C   4420         ORL     A,#0x20
   \   00000E   FA           MOV     R2,A
   \   00000F   7900         MOV     R1,#0x0
   \   000011   12....       LCALL   ??WriteLCD?relay
    247          	WriteLCD(COMMAND , ContCtrlReg); 			//设定内部对比控制器
   \   000014                ; Setup parameters for call to function WriteLCD
   \   000014   7A81         MOV     R2,#-0x7f
   \   000016   7900         MOV     R1,#0x0
   \   000018   12....       LCALL   ??WriteLCD?relay
    248          	WriteLCD(COMMAND , 0x3f & Step);
   \   00001B                ; Setup parameters for call to function WriteLCD
   \   00001B   743F         MOV     A,#0x3f
   \   00001D   02....       LJMP    ?Subroutine1 & 0xFFFF
    249          }
    250          
    251          
    252          
    253          /*******************************************************************************
    254          //函数名：void InitDisplay(void)
    255          //功能：lcd设定为正常显示状态
    256          //输入：无
    257          //输出：无
    258          ********************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    259          void InitDisplay(void)
   \                     InitDisplay:
    260          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    261          	WriteLCD(COMMAND , DisplayOff);			//关显示
   \   000004                ; Setup parameters for call to function WriteLCD
   \   000004   7AAE         MOV     R2,#-0x52
   \   000006   7900         MOV     R1,#0x0
   \   000008   12....       LCALL   ??WriteLCD?relay
    262          	WriteLCD(COMMAND , SegRemapOn);    			//ks0713/ssd1815
   \   00000B                ; Setup parameters for call to function WriteLCD
   \   00000B   7AA1         MOV     R2,#-0x5f
   \   00000D   7900         MOV     R1,#0x0
   \   00000F   12....       LCALL   ??WriteLCD?relay
    263          	WriteLCD(COMMAND , ComRemapOn);    			//ssd1815
   \   000012                ; Setup parameters for call to function WriteLCD
   \   000012   7AC8         MOV     R2,#-0x38
   \   000014   7900         MOV     R1,#0x0
   \   000016   12....       LCALL   ??WriteLCD?relay
    264          	SetContrast(iIntRegValue, iContCtrlRegValue); 	//设定缺省对比度
   \   000019                ; Setup parameters for call to function SetContrast
   \   000019   7A10         MOV     R2,#0x10
   \   00001B   7901         MOV     R1,#0x1
   \   00001D   12....       LCALL   ??SetContrast?relay
    265          	WriteLCD(COMMAND , PwrCtrlReg | IntVolBstr | IntReg | OPampBuffer); //turn on booster, regulator & divider
   \   000020                ; Setup parameters for call to function WriteLCD
   \   000020   7A2F         MOV     R2,#0x2f
   \   000022   7900         MOV     R1,#0x0
   \   000024   12....       LCALL   ??WriteLCD?relay
    266          	WriteLCD(COMMAND , DisplayOn);				//开显示
   \   000027                ; Setup parameters for call to function WriteLCD
   \   000027   7AAF         MOV     R2,#-0x51
   \   000029   7900         MOV     R1,#0x0
   \   00002B   12....       LCALL   ??WriteLCD?relay
    267          }
   \   00002E   02....       LJMP    ??Subroutine24_0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine24_0:
   \   000000   D083         POP     DPH
   \   000002   D082         POP     DPL
   \   000004   02....       LJMP    ?BRET
    268          
    269          
    270          /*******************************************************************************
    271          //函数名：void contrastctrl(uint8 start,stop)
    272          //功能：lcd对比度调整
    273          //输入：无
    274          //输出：无
    275          ********************************************************************************/
    276          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    277          void contrastctrl(uint8 start, uint8 stop)
   \                     contrastctrl:
    278          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FF           MOV     R7,A
   \   000007   8A..         MOV     ?V0 + 0,R2
    279          	uint8 i;
    280          	if (start < stop)
   \   000009   C3           CLR     C
   \   00000A   95..         SUBB    A,?V0 + 0
   \   00000C   EF           MOV     A,R7
   \   00000D   FE           MOV     R6,A
   \   00000E   5026         JNC     ??contrastctrl_0
    281          	{
    282          		for (i=start; i<stop; i+=1)
    283          		{
    284          			SetContrast(iIntRegValue, i); //slowly turn on display
   \                     ??contrastctrl_1:
   \   000010                ; Setup parameters for call to function SetContrast
   \   000010   EE           MOV     A,R6
   \   000011   FA           MOV     R2,A
   \   000012   7901         MOV     R1,#0x1
   \   000014   12....       LCALL   ??SetContrast?relay
    285          			delay_us(80);
   \   000017                ; Setup parameters for call to function delay_us
   \   000017   7A50         MOV     R2,#0x50
   \   000019   7B00         MOV     R3,#0x0
   \   00001B   12....       LCALL   ??delay_us?relay
    286          		}
   \   00001E   0E           INC     R6
   \   00001F   EE           MOV     A,R6
   \   000020   C3           CLR     C
   \   000021   95..         SUBB    A,?V0 + 0
   \   000023   5017         JNC     ??contrastctrl_2
   \   000025   80E9         SJMP    ??contrastctrl_1
    287          	}
    288          	else
    289          	{
    290          		for (i=start; i>stop; i-=1)
    291          		{
    292          			SetContrast(iIntRegValue, i); //slowly turn off display
   \                     ??contrastctrl_3:
   \   000027                ; Setup parameters for call to function SetContrast
   \   000027   EE           MOV     A,R6
   \   000028   FA           MOV     R2,A
   \   000029   7901         MOV     R1,#0x1
   \   00002B   12....       LCALL   ??SetContrast?relay
    293          			delay_us(120);
   \   00002E                ; Setup parameters for call to function delay_us
   \   00002E   7A78         MOV     R2,#0x78
   \   000030   7B00         MOV     R3,#0x0
   \   000032   12....       LCALL   ??delay_us?relay
    294          		}
   \   000035   1E           DEC     R6
   \                     ??contrastctrl_0:
   \   000036   E5..         MOV     A,?V0 + 0
   \   000038   C3           CLR     C
   \   000039   9E           SUBB    A,R6
   \   00003A   40EB         JC      ??contrastctrl_3
    295          	}
    296          }
   \                     ??contrastctrl_2:
   \   00003C   02....       LJMP    ??Subroutine21_0 & 0xFFFF
    297          
    298          
    299          
    300          //**********自己给清除的*****************************************
    301          /*
    302          void ClearScreen(void)
    303          {
    304           	uint8 x,y;
    305          	for(x = 0;x < 8 ;x++){
    306                    SetRamAddr(x , 0);
    307          	  	for(y = 0 ; y < 128 ; y++)
    308                          {	  					
    309          		     WriteLCD(DATA , 0x00);
    310          		}		
    311          	}
    312          }
    313          */
    314          //*********自己加上的***********************

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    315          void ClearScreen(void)
   \                     ClearScreen:
    316          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    317             
    318            
    319                  write_com(0x01);  //恢复到原位置
   \   000004                ; Setup parameters for call to function write_com
   \   000004   7901         MOV     R1,#0x1
   \   000006   12....       LCALL   ??write_com?relay
    320                  delay(20);
   \   000009                ; Setup parameters for call to function delay
   \   000009   7A14         MOV     R2,#0x14
   \   00000B   12....       LCALL   ?Subroutine17 & 0xFFFF
    321                  write_com(0x03);//清屏
    322          	delay(200);delay(200);delay(200);
   \                     ??CrossCallReturnLabel_30:
   \   00000E                ; Setup parameters for call to function delay
   \   00000E   7AC8         MOV     R2,#-0x38
   \   000010   12....       LCALL   ?Subroutine13 & 0xFFFF
    323                  delay(200);delay(200);delay(200);
   \                     ??CrossCallReturnLabel_20:
   \   000013                ; Setup parameters for call to function delay
   \   000013   7AC8         MOV     R2,#-0x38
   \   000015   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_32:
   \   000018   02....       LJMP    ?Subroutine0 & 0xFFFF
    324          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine17:
   \   000000   7B00         MOV     R3,#0x0
   \   000002   12....       LCALL   ??delay?relay
   \   000005                ; Setup parameters for call to function write_com
   \   000005                ; Setup parameters for call to function write_com
   \   000005   7903         MOV     R1,#0x3
   \   000007   12....       LCALL   ??write_com?relay
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   7B00         MOV     R3,#0x0
   \   000002   12....       LCALL   ??delay?relay
   \   000005                REQUIRE ??Subroutine24_0
   \   000005                ; // Fall through to label ??Subroutine24_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine13:
   \   000000   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_33:
   \   000003   7B00         MOV     R3,#0x0
   \   000005   12....       LCALL   ??delay?relay
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine19:
   \   000000   7B00         MOV     R3,#0x0
   \   000002   12....       LCALL   ??delay?relay
   \   000005                ; Setup parameters for call to function delay
   \   000005                ; Setup parameters for call to function delay
   \   000005                ; Setup parameters for call to function delay
   \   000005   7AC8         MOV     R2,#-0x38
   \   000007   7B00         MOV     R3,#0x0
   \   000009   12....       LCALL   ??delay?relay
   \   00000C                ; Setup parameters for call to function delay
   \   00000C                ; Setup parameters for call to function delay
   \   00000C                ; Setup parameters for call to function delay
   \   00000C   7AC8         MOV     R2,#-0x38
   \   00000E   22           RET
    325          
    326          //*******自己加上的 ************************************

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    327          void delay(unsigned int t)
   \                     delay:
    328          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    329          	unsigned int i,j;
    330          	for(i=t; i>0;  i--)
   \   000000   EA           MOV     A,R2
   \   000001   F8           MOV     R0,A
   \   000002   EB           MOV     A,R3
   \   000003   8007         SJMP    ??delay_0
    331                  for(j=541; j>0; j--);
   \                     ??delay_1:
   \   000005   E8           MOV     A,R0
   \   000006   24FF         ADD     A,#-0x1
   \   000008   18           DEC     R0
   \   000009   E9           MOV     A,R1
   \   00000A   34FF         ADDC    A,#-0x1
   \                     ??delay_0:
   \   00000C   F9           MOV     R1,A
   \   00000D   E8           MOV     A,R0
   \   00000E   49           ORL     A,R1
   \   00000F   70F4         JNZ     ??delay_1
    332          }
   \   000011   02....       LJMP    ?BRET
    333          
    334          /********************************************************************
    335          * 名称 : sendbyte()
    336          * 功能 : 按照液晶的串口通信协议，发送数据
    337          * 输入 : zdata
    338          * 输出 : 无
    339          *备注：自己加的
    340          ***********************************************************************/
    341          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    342          void sendbyte(unsigned char zdata)
   \                     sendbyte:
    343          {
   \   000000   C0..         PUSH    ?V0 + 0
   \   000002   C0..         PUSH    ?V0 + 1
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    344          	unsigned int i;
    345          	for(i=0; i<8; i++)
   \   000004   7A00         MOV     R2,#0x0
   \   000006   7B00         MOV     R3,#0x0
    346          	{
    347          		if((zdata << i) & 0x80)
   \                     ??sendbyte_0:
   \   000008   89..         MOV     ?V0 + 0,R1
   \   00000A   75..00       MOV     ?V0 + 1,#0x0
   \   00000D   EA           MOV     A,R2
   \   00000E   78..         MOV     R0,#?V0 + 0
   \   000010   12....       LCALL   ?S_SHL
   \   000013   E5..         MOV     A,?V0 + 0
   \   000015   5480         ANL     A,#0x80
   \   000017   6004         JZ      ??sendbyte_1
    348          		{
    349          			SID = 1;
   \   000019   D295         SETB    0x90.5
   \   00001B   8002         SJMP    ??sendbyte_2
    350          		}
    351          		else 
    352          		{
    353          			SID = 0;
   \                     ??sendbyte_1:
   \   00001D   C295         CLR     0x90.5
    354          		}
    355                          asm("nop");asm("nop");
   \                     ??sendbyte_2:
   \   00001F   00           nop
   \   000020   00           nop
    356          		SCLK = 0;
   \   000021   C294         CLR     0x90.4
    357                          asm("nop");asm("nop");
   \   000023   00           nop
   \   000024   00           nop
    358                          asm("nop");asm("nop");
   \   000025   00           nop
   \   000026   00           nop
    359          		SCLK = 1;
   \   000027   D294         SETB    0x90.4
    360                          asm("nop");asm("nop");
   \   000029   00           nop
   \   00002A   00           nop
    361                          asm("nop");asm("nop");
   \   00002B   00           nop
   \   00002C   00           nop
    362                          SCLK = 0;
   \   00002D   C294         CLR     0x90.4
    363          	}
   \   00002F   EA           MOV     A,R2
   \   000030   2401         ADD     A,#0x1
   \   000032   0A           INC     R2
   \   000033   EB           MOV     A,R3
   \   000034   3400         ADDC    A,#0x0
   \   000036   FB           MOV     R3,A
   \   000037   C3           CLR     C
   \   000038   EA           MOV     A,R2
   \   000039   9408         SUBB    A,#0x8
   \   00003B   EB           MOV     A,R3
   \   00003C   9400         SUBB    A,#0x0
   \   00003E   40C8         JC      ??sendbyte_0
    364          }
   \   000040   D0..         POP     ?V0 + 1
   \   000042   D0..         POP     ?V0 + 0
   \   000044   02....       LJMP    ?BRET
   \   000047                REQUIRE _A_P1
    365          
    366          /********************************************************************
    367          * 名称 : write_com()
    368          * 功能 : 写串口指令
    369          * 输入 : cmdcode
    370          * 输出 : 无
    371          * 备注 :自己加的
    372          ***********************************************************************/
    373          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    374          void write_com(unsigned char cmdcode)
   \                     write_com:
    375          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
    376          	CS = 1;
   \   000007   D296         SETB    0x90.6
    377          	sendbyte(0xf8);
   \   000009                ; Setup parameters for call to function sendbyte
   \   000009   79F8         MOV     R1,#-0x8
   \   00000B   12....       LCALL   ?Subroutine8 & 0xFFFF
    378          	sendbyte(cmdcode & 0xf0);
    379          	sendbyte((cmdcode << 4) & 0xf0);
    380          	delay(3);
   \                     ??CrossCallReturnLabel_10:
   \   00000E                ; Setup parameters for call to function delay
   \   00000E   7A03         MOV     R2,#0x3
   \   000010   7B00         MOV     R3,#0x0
   \   000012   12....       LCALL   ??delay?relay
    381                  CS = 0;
   \   000015                REQUIRE ?Subroutine4
   \   000015                REQUIRE _A_P1
   \   000015                ; // Fall through to label ?Subroutine4
    382          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   C296         CLR     0x90.6
   \   000002   80..         SJMP    ??Subroutine21_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   12....       LCALL   ??sendbyte?relay
   \   000003                ; Setup parameters for call to function sendbyte
   \   000003                ; Setup parameters for call to function sendbyte
   \   000003   74F0         MOV     A,#-0x10
   \   000005   5E           ANL     A,R6
   \   000006   F9           MOV     R1,A
   \   000007   12....       LCALL   ??sendbyte?relay
   \   00000A                ; Setup parameters for call to function sendbyte
   \   00000A                ; Setup parameters for call to function sendbyte
   \   00000A   EE           MOV     A,R6
   \   00000B   C4           SWAP    A
   \   00000C   54F0         ANL     A,#0xf0
   \   00000E   F9           MOV     R1,A
   \   00000F   12....       LCALL   ??sendbyte?relay
   \   000012   22           RET
    383          
    384          /********************************************************************
    385          * 名称 : write_data()
    386          * 功能 : 写串口字节
    387          * 输入 : Dispdata
    388          * 输出 : 无
    389          * 备注 :自己加上的
    390          *******************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    391          void write_data(unsigned char Dispdata)
   \                     write_data:
    392          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
    393          	CS = 1;
   \   000007   D296         SETB    0x90.6
    394                  delay(100);
   \   000009                ; Setup parameters for call to function delay
   \   000009   7A64         MOV     R2,#0x64
   \   00000B   7B00         MOV     R3,#0x0
   \   00000D   12....       LCALL   ??delay?relay
    395          	sendbyte(0xfa);
   \   000010                ; Setup parameters for call to function sendbyte
   \   000010   79FA         MOV     R1,#-0x6
   \   000012   12....       LCALL   ?Subroutine8 & 0xFFFF
    396                  sendbyte(Dispdata & 0xf0);
    397          	sendbyte((Dispdata << 4) & 0xf0);
    398          	delay(2);
   \                     ??CrossCallReturnLabel_11:
   \   000015                ; Setup parameters for call to function delay
   \   000015   7A02         MOV     R2,#0x2
   \   000017   7B00         MOV     R3,#0x0
   \   000019   12....       LCALL   ??delay?relay
    399            
    400                 /* CS = 1;
    401          	sendbyte(0xfa);
    402          	sendbyte(Dispdata & 0xf0);
    403          	sendbyte((Dispdata << 4) & 0xf0);
    404          	delay(3);
    405                  CS = 0;*/
    406          }
   \   00001C   80..         SJMP    ??Subroutine21_0
   \   00001E                REQUIRE _A_P1
    407          //*************发送字符串**********************************

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    408          void print_LCDdata(char  *dsp)
   \                     print_LCDdata:
    409          {     
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    410                char dispdata;
    411                CS = 1;
   \   000009   D296         SETB    0x90.6
    412                sendbyte(0xfa);
   \   00000B                ; Setup parameters for call to function sendbyte
   \   00000B   79FA         MOV     R1,#-0x6
   \   00000D   12....       LCALL   ??sendbyte?relay
    413                dispdata = *dsp;
   \   000010   8E82         MOV     DPL,R6
   \   000012   8F83         MOV     DPH,R7
   \   000014   8021         SJMP    ??print_LCDdata_0
    414                while(dispdata != '\0')
    415                {
    416                    sendbyte(dispdata & 0xf0);
   \                     ??print_LCDdata_1:
   \   000016                ; Setup parameters for call to function sendbyte
   \   000016   74F0         MOV     A,#-0x10
   \   000018   55..         ANL     A,?V0 + 0
   \   00001A   F9           MOV     R1,A
   \   00001B   12....       LCALL   ??sendbyte?relay
    417          	  sendbyte((dispdata << 4) & 0xf0);
   \   00001E                ; Setup parameters for call to function sendbyte
   \   00001E   E5..         MOV     A,?V0 + 0
   \   000020   C4           SWAP    A
   \   000021   54F0         ANL     A,#0xf0
   \   000023   F9           MOV     R1,A
   \   000024   12....       LCALL   ??sendbyte?relay
    418          	  delay(2);
   \   000027                ; Setup parameters for call to function delay
   \   000027   7A02         MOV     R2,#0x2
   \   000029   7B00         MOV     R3,#0x0
   \   00002B   12....       LCALL   ??delay?relay
    419                    dispdata = *(++dsp);
   \   00002E   8E82         MOV     DPL,R6
   \   000030   8F83         MOV     DPH,R7
   \   000032   A3           INC     DPTR
   \   000033   AE82         MOV     R6,DPL
   \   000035   AF83         MOV     R7,DPH
   \                     ??print_LCDdata_0:
   \   000037   E0           MOVX    A,@DPTR
   \   000038   F5..         MOV     ?V0 + 0,A
    420                } 
   \   00003A   E5..         MOV     A,?V0 + 0
   \   00003C   70D8         JNZ     ??print_LCDdata_1
    421                CS = 0;
   \   00003E   02....       LJMP    ?Subroutine4 & 0xFFFF
   \   000041                REQUIRE _A_P1
    422          }
    423          
    424          
    425          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    426          void HalLcdInit(void)
   \                     HalLcdInit:
    427          {	/*自己屏蔽的程序段
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    428                  delay_us(10000);
    429                  P1DIR |= 0xFC;
    430                  P2DIR |= 0x01;
    431                  P0DIR |= 0x02;
    432                  P1_2 = 0;
    433          	delay_us(100);	
    434          	WriteLCD(COMMAND , 0xE2);//复位
    435          
    436          	delay_us(100);
    437          	WriteLCD(COMMAND , 0xA3);
    438          
    439          	delay_us(100);	
    440          	WriteLCD(COMMAND , 0xA0);
    441          	
    442          	delay_us(100);
    443          	WriteLCD(COMMAND , 0xC8);
    444          
    445          	delay_us(100);	
    446          	WriteLCD(COMMAND , 0x24);
    447          	
    448          	delay_us(100);
    449          	WriteLCD(COMMAND , 0x81);
    450          
    451          	delay_us(100);	
    452          	WriteLCD(COMMAND , 0x14);
    453          	
    454          	delay_us(100);
    455          	WriteLCD(COMMAND , 0x2F);
    456          
    457          	delay_us(100);	
    458          	WriteLCD(COMMAND , 0x40);//从第一列开始显示
    459          	
    460          	delay_us(100);
    461          	WriteLCD(COMMAND , 0xB0);
    462          
    463          	delay_us(100);	
    464          	WriteLCD(COMMAND , 0x10);
    465          	
    466          	delay_us(100);
    467          	WriteLCD(COMMAND , 0x00);
    468          
    469          	delay_us(100);	
    470          	WriteLCD(COMMAND , 0xAF);
    471          
    472          	WriteLCD(COMMAND , 0x81);
    473          	WriteLCD(COMMAND , 0x1b);
    474                  delay_us(100);	
    475                  SetContrast(iIntRegValuea,ContrastValue);
    476          	ClearScreen();  */
    477                 // HalLcdWriteString("IEEE:",1);
    478                 // HalLcdWriteString("Init lcd",2);
    479                // HalLcdWriteString("Init lcd",3);
    480                //  PrintCh8(30,30,'O',1);
    481            //自己加的程序
    482                 P1DIR |= (1 << 4)|(1 << 5)|(1 << 6);
   \   000004   43FE70       ORL     0xfe,#0x70
    483                 delay(100);
   \   000007                ; Setup parameters for call to function delay
   \   000007   7A64         MOV     R2,#0x64
   \   000009   7B00         MOV     R3,#0x0
   \   00000B   12....       LCALL   ??delay?relay
    484          	write_com(0x30);
   \   00000E                ; Setup parameters for call to function write_com
   \   00000E   7930         MOV     R1,#0x30
   \   000010   12....       LCALL   ?Subroutine9 & 0xFFFF
    485          	delay(5);
    486          	write_com(0x0c);
   \                     ??CrossCallReturnLabel_12:
   \   000013                ; Setup parameters for call to function write_com
   \   000013   790C         MOV     R1,#0xc
   \   000015   12....       LCALL   ?Subroutine9 & 0xFFFF
    487          	delay(5);
    488                  write_com(0x01);
   \                     ??CrossCallReturnLabel_13:
   \   000018                ; Setup parameters for call to function write_com
   \   000018   7901         MOV     R1,#0x1
   \   00001A   12....       LCALL   ??write_com?relay
    489                  delay(50);
   \   00001D                ; Setup parameters for call to function delay
   \   00001D   7A32         MOV     R2,#0x32
   \   00001F   12....       LCALL   ?Subroutine17 & 0xFFFF
    490                  write_com(0x03);
    491          	delay(10);
   \                     ??CrossCallReturnLabel_31:
   \   000022                ; Setup parameters for call to function delay
   \   000022   7A0A         MOV     R2,#0xa
   \   000024   02....       LJMP    ?Subroutine0 & 0xFFFF
   \   000027                REQUIRE P1DIR
    492            
    493          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   12....       LCALL   ??write_com?relay
   \   000003                ; Setup parameters for call to function delay
   \   000003                ; Setup parameters for call to function delay
   \   000003   7A05         MOV     R2,#0x5
   \   000005   7B00         MOV     R3,#0x0
   \   000007   12....       LCALL   ??delay?relay
   \   00000A   22           RET
    494          
    495          
    496          
    497          /*******************************************************************************
    498          //函数名：void Print6(uint8 xx, uint8 yy, uint8 ch1[], uint8 yn)
    499          //功能：显示6*8字符串
    500          //输入：xx ,yy 坐标,ch1待显示的字符串,yn是否反黑
    501          //输出：无
    502          ********************************************************************************/
    503          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    504          void Print6(uint8 xx, uint8 yy, uint8 ch1[], uint8 yn)		
   \                     Print6:
    505          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V0 + 1,R1
   \   000007   8A..         MOV     ?V0 + 0,R2
   \   000009   8C..         MOV     ?V0 + 6,R4
   \   00000B   8D..         MOV     ?V0 + 7,R5
   \   00000D   8B..         MOV     ?V0 + 3,R3
    506          	uint8 ii = 0;
    507          	uint8 bb = 0;
   \   00000F   75..00       MOV     ?V0 + 2,#0x0
    508          	unsigned int index = 0 ;	
   \   000012   8017         SJMP    ??Print6_0
    509          			
    510          	while(ch1[bb] != '\0')
    511          	{
    512                          index = (unsigned int)(ch1[bb] - 0x20);
    513          		index = (unsigned int)index*6;		
    514          		for(ii=0;ii<6;ii++)
    515          		{
    516          			SetRamAddr(xx , yy);
    517          			if(yn == 0)
    518          			{
    519          				WriteLCD(DATA, ~FontSystem6x8[index]);
    520          				
    521          			}
    522          			else
    523          			{
    524          				WriteLCD(DATA, FontSystem6x8[index]);
   \                     ??Print6_1:
   \   000014                ; Setup parameters for call to function WriteLCD
   \   000014   7901         MOV     R1,#0x1
   \   000016   12....       LCALL   ??WriteLCD?relay
    525          			}		
    526          			index += 1;
   \   000019   EE           MOV     A,R6
   \   00001A   2401         ADD     A,#0x1
   \   00001C   0E           INC     R6
   \   00001D   EF           MOV     A,R7
   \   00001E   3400         ADDC    A,#0x0
   \   000020   FF           MOV     R7,A
    527          			yy += 1;
   \   000021   05..         INC     ?V0 + 0
   \   000023   15..         DEC     ?V0 + 4
   \   000025   E5..         MOV     A,?V0 + 4
   \   000027   702D         JNZ     ??Print6_2
    528          		}		
    529          		bb += 1;
   \   000029   05..         INC     ?V0 + 2
   \                     ??Print6_0:
   \   00002B   85....       MOV     ?V0 + 4,?V0 + 2
   \   00002E   E5..         MOV     A,?V0 + 6
   \   000030   25..         ADD     A,?V0 + 4
   \   000032   F582         MOV     DPL,A
   \   000034   E5..         MOV     A,?V0 + 7
   \   000036   3400         ADDC    A,#0x0
   \   000038   F583         MOV     DPH,A
   \   00003A   E0           MOVX    A,@DPTR
   \   00003B   6036         JZ      ??Print6_3
   \   00003D   24E0         ADD     A,#-0x20
   \   00003F   FE           MOV     R6,A
   \   000040   E4           CLR     A
   \   000041   34FF         ADDC    A,#-0x1
   \   000043   FF           MOV     R7,A
   \   000044   EE           MOV     A,R6
   \   000045   75F006       MOV     B,#0x6
   \   000048   A4           MUL     AB
   \   000049   FE           MOV     R6,A
   \   00004A   A8F0         MOV     R0,B
   \   00004C   75F006       MOV     B,#0x6
   \   00004F   EF           MOV     A,R7
   \   000050   A4           MUL     AB
   \   000051   28           ADD     A,R0
   \   000052   FF           MOV     R7,A
   \   000053   75..06       MOV     ?V0 + 4,#0x6
   \                     ??Print6_2:
   \   000056                ; Setup parameters for call to function SetRamAddr
   \   000056   AA..         MOV     R2,?V0 + 0
   \   000058   A9..         MOV     R1,?V0 + 1
   \   00005A   12....       LCALL   ??SetRamAddr?relay
   \   00005D   74..         MOV     A,#FontSystem6x8 & 0xff
   \   00005F   2E           ADD     A,R6
   \   000060   F582         MOV     DPL,A
   \   000062   74..         MOV     A,#(FontSystem6x8 >> 8) & 0xff
   \   000064   3F           ADDC    A,R7
   \   000065   F583         MOV     DPH,A
   \   000067   E4           CLR     A
   \   000068   93           MOVC    A,@A+DPTR
   \   000069   FA           MOV     R2,A
   \   00006A   E5..         MOV     A,?V0 + 3
   \   00006C   70A6         JNZ     ??Print6_1
   \   00006E                ; Setup parameters for call to function WriteLCD
   \   00006E   EA           MOV     A,R2
   \   00006F   F4           CPL     A
   \   000070   FA           MOV     R2,A
   \   000071   80A1         SJMP    ??Print6_1
    530          	}
    531          }
   \                     ??Print6_3:
   \   000073   02....       LJMP    ??Subroutine22_0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine22_0:
   \   000000   7F08         MOV     R7,#0x8
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA
    532          
    533          
    534          //*******************************************************************************
    535          //函数名：void Printn8(uint8 xx ,uint8 yy , uint32 no,uint8 yn,uint8 le)
    536          //功能：显示8*8一个无符号数据
    537          //输入：xx , yy屏幕当中位置,no待显示数据 yn=0正常显示 yn=1反黑显示  le有效位
    538          //输出：无
    539          //*******************************************************************************

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    540          void Printn8(uint8 xx ,uint8 yy , uint32 no,uint8 yn,uint8 le)
   \                     Printn8:
    541          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   7403         MOV     A,#0x3
   \   00000C   12....       LCALL   ?XSTACK_DISP0_8
   \   00000F   E9           MOV     A,R1
   \   000010   F0           MOVX    @DPTR,A
   \   000011   7402         MOV     A,#0x2
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   EA           MOV     A,R2
   \   000017   F0           MOVX    @DPTR,A
   \   000018   7401         MOV     A,#0x1
   \   00001A   12....       LCALL   ?XSTACK_DISP0_8
   \   00001D   EB           MOV     A,R3
   \   00001E   F0           MOVX    @DPTR,A
   \   00001F   EC           MOV     A,R4
   \   000020   85..82       MOV     DPL,?XSP + 0
   \   000023   85..83       MOV     DPH,?XSP + 1
   \   000026   F0           MOVX    @DPTR,A
    542          	uint8 ch2[6];
    543          	uint8 ii;
    544          
    545          	for(ii = 1 ; ii <= le ;){
   \   000027   7A01         MOV     R2,#0x1
   \   000029   8065         SJMP    ??Printn8_0
    546          		ch2[le - ii] = no % 10 + 0x30;
   \                     ??Printn8_1:
   \   00002B   741A         MOV     A,#0x1a
   \   00002D   12....       LCALL   ?XSTACK_DISP0_8
   \   000030   78..         MOV     R0,#?V0 + 4
   \   000032   12....       LCALL   ?L_MOV_X
   \   000035   90....       MOV     DPTR,#__Constant_a
   \   000038   78..         MOV     R0,#?V0 + 0
   \   00003A   12....       LCALL   ?L_MOV_X
   \   00003D   78..         MOV     R0,#?V0 + 4
   \   00003F   79..         MOV     R1,#?V0 + 0
   \   000041   12....       LCALL   ?UL_DIV_MOD
   \   000044   E5..         MOV     A,?V0 + 0
   \   000046   2430         ADD     A,#0x30
   \   000048   C0E0         PUSH    A
   \   00004A   85..82       MOV     DPL,?XSP + 0
   \   00004D   85..83       MOV     DPH,?XSP + 1
   \   000050   E0           MOVX    A,@DPTR
   \   000051   8A..         MOV     ?V0 + 0,R2
   \   000053   C3           CLR     C
   \   000054   95..         SUBB    A,?V0 + 0
   \   000056   F8           MOV     R0,A
   \   000057   95E0         SUBB    A,0xE0 /* A   */
   \   000059   F9           MOV     R1,A
   \   00005A   7404         MOV     A,#0x4
   \   00005C   12....       LCALL   ?XSTACK_DISP0_8
   \   00005F   E582         MOV     A,DPL
   \   000061   28           ADD     A,R0
   \   000062   F582         MOV     DPL,A
   \   000064   E583         MOV     A,DPH
   \   000066   39           ADDC    A,R1
   \   000067   F583         MOV     DPH,A
   \   000069   D0E0         POP     A
   \   00006B   F0           MOVX    @DPTR,A
    547          		no /= 10;
   \   00006C   741A         MOV     A,#0x1a
   \   00006E   12....       LCALL   ?XSTACK_DISP0_8
   \   000071   78..         MOV     R0,#?V0 + 4
   \   000073   12....       LCALL   ?L_MOV_X
   \   000076   90....       MOV     DPTR,#__Constant_a
   \   000079   78..         MOV     R0,#?V0 + 0
   \   00007B   12....       LCALL   ?L_MOV_X
   \   00007E   78..         MOV     R0,#?V0 + 4
   \   000080   79..         MOV     R1,#?V0 + 0
   \   000082   12....       LCALL   ?UL_DIV_MOD
   \   000085   741A         MOV     A,#0x1a
   \   000087   12....       LCALL   ?XSTACK_DISP0_8
   \   00008A   78..         MOV     R0,#?V0 + 4
   \   00008C   12....       LCALL   ?L_MOV_TO_X
    548          		ii += 1;
   \   00008F   0A           INC     R2
    549          	}
   \                     ??Printn8_0:
   \   000090   85..82       MOV     DPL,?XSP + 0
   \   000093   85..83       MOV     DPH,?XSP + 1
   \   000096   E0           MOVX    A,@DPTR
   \   000097   C3           CLR     C
   \   000098   9A           SUBB    A,R2
   \   000099   5090         JNC     ??Printn8_1
    550          	ch2[le] = '\0';
   \   00009B   E0           MOVX    A,@DPTR
   \   00009C   F8           MOV     R0,A
   \   00009D   7404         MOV     A,#0x4
   \   00009F   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A2   12....       LCALL   ?Subroutine16 & 0xFFFF
    551          	Print8(xx ,yy ,ch2 ,yn);
   \                     ??CrossCallReturnLabel_28:
   \   0000A5                ; Setup parameters for call to function Print8
   \   0000A5   04           INC     A
   \   0000A6   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A9   E0           MOVX    A,@DPTR
   \   0000AA   F5..         MOV     ?V0 + 0,A
   \   0000AC   75..00       MOV     ?V0 + 1,#0x0
   \   0000AF   78..         MOV     R0,#?V0 + 0
   \   0000B1   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000B4   7406         MOV     A,#0x6
   \   0000B6   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B9   8582..       MOV     ?V0 + 0,DPL
   \   0000BC   8583..       MOV     ?V0 + 1,DPH
   \   0000BF   78..         MOV     R0,#?V0 + 0
   \   0000C1   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000C4   7406         MOV     A,#0x6
   \   0000C6   12....       LCALL   ?XSTACK_DISP0_8
   \   0000C9   E0           MOVX    A,@DPTR
   \   0000CA   FC           MOV     R4,A
   \   0000CB   7D00         MOV     R5,#0x0
   \   0000CD   7407         MOV     A,#0x7
   \   0000CF   12....       LCALL   ?XSTACK_DISP0_8
   \   0000D2   E0           MOVX    A,@DPTR
   \   0000D3   FA           MOV     R2,A
   \   0000D4   12....       LCALL   ??Subroutine23_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_38:
   \   0000D7   12....       LCALL   ?DEALLOC_XSTACK8
    552          }
   \   0000DA   740A         MOV     A,#0xa
   \   0000DC                REQUIRE ?Subroutine2
   \   0000DC                ; // Fall through to label ?Subroutine2

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003                REQUIRE ??Subroutine22_0
   \   000003                ; // Fall through to label ??Subroutine22_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine23_0:
   \   000000   7B00         MOV     R3,#0x0
   \   000002   12....       LCALL   ??Print8?relay
   \   000005   7404         MOV     A,#0x4
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine16:
   \   000000   E582         MOV     A,DPL
   \   000002   28           ADD     A,R0
   \   000003   F582         MOV     DPL,A
   \   000005   E583         MOV     A,DPH
   \   000007   3400         ADDC    A,#0x0
   \   000009   F583         MOV     DPH,A
   \   00000B   E4           CLR     A
   \   00000C   F0           MOVX    @DPTR,A
   \   00000D   22           RET
    553          
    554          /*******************************************************************************
    555          //函数名：void Print8(uint16 y,uint16 x, uint8 ch,uint16 yn)
    556          //功能：显示8*8字符
    557          //输入：xx ,yy 坐标,ch待显示的字符,yn是否反黑
    558          //输出：无
    559          ********************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    560          void PrintCh8(uint16 y,uint16 x, uint8 ch,uint16 yn)
   \                     PrintCh8:
    561          {
   \   000000   74F1         MOV     A,#-0xf
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 15
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   8C..         MOV     ?V0 + 0,R4
    562          	uint8 wm;
    563          	uint16 adder;
    564          	
    565          	adder = (ch - 0x20) * 16;
   \   000009   E9           MOV     A,R1
   \   00000A   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_26:
   \   00000D   12....       LCALL   ?S_SHL
   \   000010   85....       MOV     ?V0 + 2,?V0 + 4
   \   000013   85....       MOV     ?V0 + 3,?V0 + 5
    566          	for(wm = 0;wm < 8;wm++)
   \   000016   75..08       MOV     ?V0 + 4,#0x8
    567          	{
    568          		SetRamAddr(y , x);
   \                     ??PrintCh8_0:
   \   000019                ; Setup parameters for call to function SetRamAddr
   \   000019   12....       LCALL   ?Subroutine11 & 0xFFFF
    569          		if(yn == 0)
   \                     ??CrossCallReturnLabel_16:
   \   00001C   12....       LCALL   ?XSTACK_DISP0_8
   \   00001F   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_22:
   \   000022   7003         JNZ     ??PrintCh8_1
    570          		{
    571          			WriteLCD(DATA, ~Font8X8[adder]);
   \   000024                ; Setup parameters for call to function WriteLCD
   \   000024   EA           MOV     A,R2
   \   000025   F4           CPL     A
   \   000026   FA           MOV     R2,A
    572          		}
    573          		else
    574          		{
    575          			WriteLCD(DATA, Font8X8[adder]);
   \                     ??PrintCh8_1:
   \   000027                ; Setup parameters for call to function WriteLCD
   \   000027   12....       LCALL   ?Subroutine5 & 0xFFFF
    576          		}
    577          		adder += 1;
    578          		x += 1;
    579          	}
   \                     ??CrossCallReturnLabel_0:
   \   00002A   70ED         JNZ     ??PrintCh8_0
    580          	y += 1;
   \   00002C   0E           INC     R6
    581          	x -= 8;
   \   00002D   E5..         MOV     A,?V0 + 0
   \   00002F   24F8         ADD     A,#-0x8
   \   000031   F5..         MOV     ?V0 + 0,A
    582          	for(wm = 0;wm < 8;wm++)
   \   000033   75..08       MOV     ?V0 + 4,#0x8
    583          	{
    584          		SetRamAddr(y , x);
   \                     ??PrintCh8_2:
   \   000036                ; Setup parameters for call to function SetRamAddr
   \   000036   12....       LCALL   ?Subroutine11 & 0xFFFF
    585          		if(yn == 0)
   \                     ??CrossCallReturnLabel_17:
   \   000039   12....       LCALL   ?XSTACK_DISP0_8
   \   00003C   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_23:
   \   00003F   7003         JNZ     ??PrintCh8_3
    586          		{
    587          				WriteLCD(DATA, ~Font8X8[adder]);
   \   000041                ; Setup parameters for call to function WriteLCD
   \   000041   EA           MOV     A,R2
   \   000042   F4           CPL     A
   \   000043   FA           MOV     R2,A
    588          		}
    589          		else
    590          		{
    591          			WriteLCD(DATA, Font8X8[adder]);	
   \                     ??PrintCh8_3:
   \   000044                ; Setup parameters for call to function WriteLCD
   \   000044   12....       LCALL   ?Subroutine5 & 0xFFFF
    592          		}
    593          		adder += 1;
    594          		x += 1;
    595          	}
   \                     ??CrossCallReturnLabel_1:
   \   000047   70ED         JNZ     ??PrintCh8_2
    596          }
   \   000049                REQUIRE ?Subroutine3
   \   000049                ; // Fall through to label ?Subroutine3

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   7F07         MOV     R7,#0x7
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine11:
   \   000000   12....       LCALL   ?Subroutine20 & 0xFFFF
   \                     ??CrossCallReturnLabel_34:
   \   000003   740F         MOV     A,#0xf
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine15:
   \   000000   24E0         ADD     A,#-0x20
   \   000002   F5..         MOV     ?V0 + 4,A
   \   000004   E4           CLR     A
   \   000005   34FF         ADDC    A,#-0x1
   \   000007   F5..         MOV     ?V0 + 5,A
   \   000009   7404         MOV     A,#0x4
   \   00000B   78..         MOV     R0,#?V0 + 4
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine14:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F8           MOV     R0,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F9           MOV     R1,A
   \   000005   E8           MOV     A,R0
   \   000006   49           ORL     A,R1
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine20:
   \   000000   AA..         MOV     R2,?V0 + 0
   \   000002   EE           MOV     A,R6
   \   000003   F9           MOV     R1,A
   \   000004   12....       LCALL   ??SetRamAddr?relay
   \   000007   74..         MOV     A,#Font8X8 & 0xff
   \   000009   25..         ADD     A,?V0 + 2
   \   00000B   F582         MOV     DPL,A
   \   00000D   74..         MOV     A,#(Font8X8 >> 8) & 0xff
   \   00000F   35..         ADDC    A,?V0 + 3
   \   000011   F583         MOV     DPH,A
   \   000013   E4           CLR     A
   \   000014   93           MOVC    A,@A+DPTR
   \   000015   FA           MOV     R2,A
   \   000016   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   7901         MOV     R1,#0x1
   \   000002   12....       LCALL   ??WriteLCD?relay
   \   000005   E5..         MOV     A,?V0 + 2
   \   000007   2401         ADD     A,#0x1
   \   000009   F5..         MOV     ?V0 + 2,A
   \   00000B   E5..         MOV     A,?V0 + 3
   \   00000D   3400         ADDC    A,#0x0
   \   00000F   F5..         MOV     ?V0 + 3,A
   \   000011   E5..         MOV     A,?V0 + 0
   \   000013   04           INC     A
   \   000014   F5..         MOV     ?V0 + 0,A
   \   000016   15..         DEC     ?V0 + 4
   \   000018   E5..         MOV     A,?V0 + 4
   \   00001A   22           RET
    597          
    598          
    599          /*******************************************************************************
    600          //函数名：void Print8(uint16 y,uint16 x, uint8 ch[],uint16 yn)
    601          //功能：显示8*8字符串
    602          //输入：xx ,yy 坐标,ch1待显示的字符串,yn是否反黑
    603          //输出：无
    604          ********************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    605          void Print8(uint16 y,uint16 x, uint8 ch[],uint16 yn)
   \                     Print8:
    606          {
   \   000000   74F1         MOV     A,#-0xf
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 15
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   8C..         MOV     ?V0 + 0,R4
    607          	uint8 wm ,ii = 0;
   \   000009   75..00       MOV     ?V0 + 6,#0x0
   \   00000C   8008         SJMP    ??Print8_0
    608          	uint16 adder;
    609          
    610          	while(ch[ii] != '\0')
    611          	{
    612          		adder = (ch[ii] - 0x20) * 16;
    613          
    614          		for(wm = 0;wm < 8;wm++)
    615          		{
    616          			SetRamAddr(y , x);
    617          			if(yn == 0)
    618          			{
    619          				WriteLCD(DATA, ~Font8X8[adder]);
    620          			}
    621          			else
    622          			{
    623          				WriteLCD(DATA, Font8X8[adder]);
    624          			}
    625          			adder += 1;
    626          			x += 1;
    627          		}
    628          		y += 1;
    629          		x -= 8;
    630          		for(wm = 0;wm < 8;wm++)
    631          		{
    632          			SetRamAddr(y , x);
    633          			if(yn == 0)
    634          			{
    635          				WriteLCD(DATA, ~Font8X8[adder]);
    636          			}
    637          			else
    638          			{
    639          				WriteLCD(DATA, Font8X8[adder]);	
   \                     ??Print8_1:
   \   00000E                ; Setup parameters for call to function WriteLCD
   \   00000E   12....       LCALL   ?Subroutine5 & 0xFFFF
    640          			}
   \                     ??CrossCallReturnLabel_2:
   \   000011   7040         JNZ     ??Print8_2
    641          			adder += 1;
    642          			x += 1;
    643          		}
    644          		ii += 1;
   \   000013   05..         INC     ?V0 + 6
    645          		y -= 1;
   \   000015   1E           DEC     R6
   \                     ??Print8_0:
   \   000016   A8..         MOV     R0,?V0 + 6
   \   000018   740F         MOV     A,#0xf
   \   00001A   12....       LCALL   ?XSTACK_DISP0_8
   \   00001D   E0           MOVX    A,@DPTR
   \   00001E   28           ADD     A,R0
   \   00001F   F8           MOV     R0,A
   \   000020   A3           INC     DPTR
   \   000021   E0           MOVX    A,@DPTR
   \   000022   12....       LCALL   ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_14:
   \   000025   603C         JZ      ??Print8_3
   \   000027   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_27:
   \   00002A   12....       LCALL   ?S_SHL
   \   00002D   85....       MOV     ?V0 + 2,?V0 + 4
   \   000030   85....       MOV     ?V0 + 3,?V0 + 5
   \   000033   75..08       MOV     ?V0 + 4,#0x8
   \                     ??Print8_4:
   \   000036                ; Setup parameters for call to function SetRamAddr
   \   000036   12....       LCALL   ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_18:
   \   000039   12....       LCALL   ?XSTACK_DISP0_8
   \   00003C   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_24:
   \   00003F   7003         JNZ     ??Print8_5
   \   000041                ; Setup parameters for call to function WriteLCD
   \   000041   EA           MOV     A,R2
   \   000042   F4           CPL     A
   \   000043   FA           MOV     R2,A
   \                     ??Print8_5:
   \   000044                ; Setup parameters for call to function WriteLCD
   \   000044   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_3:
   \   000047   70ED         JNZ     ??Print8_4
   \   000049   0E           INC     R6
   \   00004A   E5..         MOV     A,?V0 + 0
   \   00004C   24F8         ADD     A,#-0x8
   \   00004E   F5..         MOV     ?V0 + 0,A
   \   000050   75..08       MOV     ?V0 + 4,#0x8
   \                     ??Print8_2:
   \   000053                ; Setup parameters for call to function SetRamAddr
   \   000053   12....       LCALL   ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_19:
   \   000056   12....       LCALL   ?XSTACK_DISP0_8
   \   000059   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_25:
   \   00005C   70B0         JNZ     ??Print8_1
   \   00005E                ; Setup parameters for call to function WriteLCD
   \   00005E   EA           MOV     A,R2
   \   00005F   F4           CPL     A
   \   000060   FA           MOV     R2,A
   \   000061   80AB         SJMP    ??Print8_1
    646          	}
    647          
    648          }
   \                     ??Print8_3:
   \   000063   80..         SJMP    ?Subroutine3

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine12:
   \   000000   12....       LCALL   ?Subroutine20 & 0xFFFF
   \                     ??CrossCallReturnLabel_35:
   \   000003   7411         MOV     A,#0x11
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   3400         ADDC    A,#0x0
   \   000002   F9           MOV     R1,A
   \   000003   8882         MOV     DPL,R0
   \   000005   8983         MOV     DPH,R1
   \   000007   E0           MOVX    A,@DPTR
   \   000008   22           RET
    649          
    650          
    651          /*******************************************************************************
    652          //函数名：void Print16(uint16 y,uint16 x,uint8 ch[],uint16 yn)
    653          //功能：在屏幕上显示汉字
    654          //输入：x ,y 坐标,ch[]待显示的汉字,yn是否反黑
    655          //输出：无
    656          ********************************************************************************
    657          void Print16(uint16 y,uint16 x,uint8 ch[],uint16 yn)
    658          {
    659          	uint8 wm ,ii = 0;
    660          	uint16 adder;
    661          
    662          	wm = 0;
    663          	adder = 1;
    664          	while(FontNew8X16_Index[wm] > 128)
    665          	{
    666          		if(FontNew8X16_Index[wm] == ch[ii])
    667          		{
    668          			if(FontNew8X16_Index[wm + 1] == ch[ii + 1])
    669          			{
    670          				adder = wm * 14;
    671          				break;
    672          			}
    673          		}
    674          		wm += 2;				//找到汉字在索引中的位置
    675          	}
    676          	SetRamAddr(y , x);
    677          
    678          	if(adder != 1)					//找到汉字，显示出来	
    679          	{
    680          		
    681          		for(wm = 0;wm < 14;wm++)
    682          		{
    683          			SetRamAddr(y , x);
    684          			if(yn == 0)
    685          			{
    686          				WriteLCD(DATA, ~FontNew16X16[adder]);
    687          			}
    688          			else
    689          			{
    690          				WriteLCD(DATA, FontNew16X16[adder]);
    691          			}
    692          			adder += 1;
    693          			x += 1;
    694          		}
    695                          for(wm = 0;wm < 2;wm++)
    696          		{
    697          			SetRamAddr(y , x);
    698          			if(yn == 0)
    699          			{
    700          				WriteLCD(DATA, 0xff);
    701          			}
    702          			else
    703          			{
    704          				WriteLCD(DATA, 0x00);
    705          			}
    706          			x += 1;
    707          		}
    708          		y += 1;
    709          		x -=16;
    710          
    711          		for(wm = 0;wm < 14;wm++)
    712          		{
    713          			SetRamAddr(y , x);
    714          			if(yn == 0)
    715          			{
    716          				WriteLCD(DATA, ~FontNew16X16[adder]);
    717          			}
    718          			else
    719          			{
    720          				WriteLCD(DATA, FontNew16X16[adder]);
    721          			}
    722          			adder += 1;
    723          			x += 1;
    724          		}
    725                          for(wm = 0;wm < 2;wm++)
    726          		{
    727          			SetRamAddr(y , x);
    728          			if(yn == 0)
    729          			{
    730          				WriteLCD(DATA, 0xff);
    731          			}
    732          			else
    733          			{
    734          				WriteLCD(DATA, 0x00);
    735          			}
    736          			x += 1;
    737          		}
    738          
    739          
    740          	}
    741          	else						//找不到字显示空格			
    742          	{
    743          		ii += 1;
    744          
    745          		for(wm = 0;wm < 16;wm++)
    746          		{
    747          			SetRamAddr(y , x);
    748          			if(yn == 0)
    749          			{
    750          				WriteLCD(DATA, 0xff);
    751          			}
    752          			else
    753          			{
    754          				WriteLCD(DATA, 0x00);
    755          			}
    756          			x += 1;
    757          		}
    758          		y += 1;
    759          		x -= 16;
    760          		for(wm = 0;wm < 16;wm++)
    761          		{
    762          			SetRamAddr(y , x);
    763          			if(yn == 0)
    764          			{
    765          				WriteLCD(DATA, 0xff);
    766          			}
    767          			else
    768          			{
    769          				WriteLCD(DATA, 0x00);
    770          			}
    771          			x += 1;
    772          		}
    773          	}
    774          }*/
    775          
    776          
    777          /*******************************************************************************
    778          //函数名：void Print(uint8 y, uint8 x, uint8 ch[], uint16 yn)
    779          //功能：实现汉字及字母混合显示
    780          //输入：x ,y 坐标,ch[]待显示的汉字或字母,yn是否反黑
    781          //输出：无
    782          ********************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    783          void Print(uint8 y, uint8 x, uint8 ch[], uint16 yn)
   \                     Print:
    784          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 3
   \   000005   74FD         MOV     A,#-0x3
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   89..         MOV     ?V0 + 4,R1
   \   00000C   8A..         MOV     ?V0 + 1,R2
   \   00000E   8C..         MOV     ?V0 + 6,R4
   \   000010   8D..         MOV     ?V0 + 7,R5
   \   000012   7413         MOV     A,#0x13
   \   000014   12....       LCALL   ?XSTACK_DISP0_8
   \   000017   E0           MOVX    A,@DPTR
   \   000018   FE           MOV     R6,A
   \   000019   A3           INC     DPTR
   \   00001A   E0           MOVX    A,@DPTR
   \   00001B   FF           MOV     R7,A
    785          	uint8 ch2[3];
    786          	uint8 ii;
    787                  ii = 0;
   \   00001C   75..00       MOV     ?V0 + 0,#0x0
   \   00001F   8021         SJMP    ??Print_0
    788          	while(ch[ii] != '\0')
    789          	{
    790          		if(ch[ii] > 128)
    791          		{
    792          			ch2[0] = ch[ii];
    793          	 		ch2[1] = ch[ii + 1];
   \                     ??Print_1:
   \   000021   8882         MOV     DPL,R0
   \   000023   8983         MOV     DPH,R1
   \   000025   A3           INC     DPTR
   \   000026   E0           MOVX    A,@DPTR
   \   000027   C0E0         PUSH    A
   \   000029   7401         MOV     A,#0x1
   \   00002B   12....       LCALL   ?XSTACK_DISP0_8
   \   00002E   D0E0         POP     A
   \   000030   F0           MOVX    @DPTR,A
    794          			ch2[2] = '\0';			//汉字为两个字节
   \   000031   7402         MOV     A,#0x2
   \   000033   12....       LCALL   ?XSTACK_DISP0_8
   \   000036   E4           CLR     A
   \   000037   F0           MOVX    @DPTR,A
    795          			//Print16(y , x , ch2 , yn);	//显示汉字
    796          			x += 16;
   \   000038   7410         MOV     A,#0x10
   \   00003A   25..         ADD     A,?V0 + 1
   \   00003C   F5..         MOV     ?V0 + 1,A
    797          			ii += 2;
   \   00003E   05..         INC     ?V0 + 0
   \                     ??Print_2:
   \   000040   05..         INC     ?V0 + 0
    798          		}
   \                     ??Print_0:
   \   000042   85....       MOV     ?V0 + 2,?V0 + 0
   \   000045   E5..         MOV     A,?V0 + 6
   \   000047   25..         ADD     A,?V0 + 2
   \   000049   F8           MOV     R0,A
   \   00004A   E5..         MOV     A,?V0 + 7
   \   00004C   12....       LCALL   ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_15:
   \   00004F   6047         JZ      ??Print_3
   \   000051   C3           CLR     C
   \   000052   9481         SUBB    A,#-0x7f
   \   000054   E0           MOVX    A,@DPTR
   \   000055   85..82       MOV     DPL,?XSP + 0
   \   000058   85..83       MOV     DPH,?XSP + 1
   \   00005B   F0           MOVX    @DPTR,A
   \   00005C   50C3         JNC     ??Print_1
    799          		else
    800          		{
    801          			ch2[0] = ch[ii];	
    802          			ch2[1] = '\0';			//字母占一个字节
   \   00005E   7401         MOV     A,#0x1
   \   000060   12....       LCALL   ?XSTACK_DISP0_8
   \   000063   E4           CLR     A
   \   000064   F0           MOVX    @DPTR,A
    803          			Print8(y , x , ch2 , yn);	//显示字母
   \   000065                ; Setup parameters for call to function Print8
   \   000065   8E..         MOV     ?V0 + 2,R6
   \   000067   8F..         MOV     ?V0 + 3,R7
   \   000069   78..         MOV     R0,#?V0 + 2
   \   00006B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00006E   7402         MOV     A,#0x2
   \   000070   12....       LCALL   ?XSTACK_DISP0_8
   \   000073   8582..       MOV     ?V0 + 2,DPL
   \   000076   8583..       MOV     ?V0 + 3,DPH
   \   000079   78..         MOV     R0,#?V0 + 2
   \   00007B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00007E   85....       MOV     ?V0 + 2,?V0 + 1
   \   000081   AC..         MOV     R4,?V0 + 2
   \   000083   7D00         MOV     R5,#0x0
   \   000085   85....       MOV     ?V0 + 2,?V0 + 4
   \   000088   AA..         MOV     R2,?V0 + 2
   \   00008A   12....       LCALL   ??Subroutine23_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_39:
   \   00008D   12....       LCALL   ?DEALLOC_XSTACK8
    804          			x += 8;
   \   000090   7408         MOV     A,#0x8
   \   000092   25..         ADD     A,?V0 + 1
   \   000094   F5..         MOV     ?V0 + 1,A
    805          			ii += 1;
   \   000096   80A8         SJMP    ??Print_2
    806          		}
    807          	}
    808          }
   \                     ??Print_3:
   \   000098   7403         MOV     A,#0x3
   \   00009A   02....       LJMP    ?Subroutine2 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    809          void HalLcdClearLine( uint8 line )
   \                     HalLcdClearLine:
    810          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
    811            Print8(line,0,"                ",1);
   \   000007                ; Setup parameters for call to function Print8
   \   000007   75..01       MOV     ?V0 + 0,#0x1
   \   00000A   75..00       MOV     ?V0 + 1,#0x0
   \   00000D   78..         MOV     R0,#?V0 + 0
   \   00000F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000012   75....       MOV     ?V0 + 0,#`?<Constant "                ">` & 0xff
   \   000015   75....       MOV     ?V0 + 1,#(`?<Constant "                ">` >> 8) & 0xff
   \   000018   78..         MOV     R0,#?V0 + 0
   \   00001A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00001D   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_36:
   \   000020   12....       LCALL   ?DEALLOC_XSTACK8
    812          }
   \   000023   7F02         MOV     R7,#0x2
   \   000025   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine18:
   \   000000   7C00         MOV     R4,#0x0
   \   000002   7D00         MOV     R5,#0x0
   \   000004   8E..         MOV     ?V0 + 0,R6
   \   000006   AA..         MOV     R2,?V0 + 0
   \   000008                REQUIRE ??Subroutine23_0
   \   000008                ; // Fall through to label ??Subroutine23_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    813          void HalLcdWriteString ( char *str, uint8 option)
   \                     HalLcdWriteString:
    814          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 20
   \   000005   74EC         MOV     A,#-0x14
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
   \   00000E   89..         MOV     ?V0 + 3,R1
    815            unsigned char i; 
    816            uint8 LcdBuf[20];
    817            osal_memcpy(LcdBuf,str,20);
   \   000010                ; Setup parameters for call to function osal_memcpy
   \   000010   8E..         MOV     ?V0 + 0,R6
   \   000012   8F..         MOV     ?V0 + 1,R7
   \   000014   75..00       MOV     ?V0 + 2,#0x0
   \   000017   78..         MOV     R0,#?V0 + 0
   \   000019   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00001C   7C14         MOV     R4,#0x14
   \   00001E   7D00         MOV     R5,#0x0
   \   000020   7403         MOV     A,#0x3
   \   000022   12....       LCALL   ?XSTACK_DISP0_8
   \   000025   AA82         MOV     R2,DPL
   \   000027   AB83         MOV     R3,DPH
   \   000029   12....       LCALL   ??osal_memcpy?relay
   \   00002C   7403         MOV     A,#0x3
   \   00002E   12....       LCALL   ?DEALLOC_XSTACK8
    818            i = strlen(str);
    819            LcdBuf[i] = '\0';  
   \   000031                ; Setup parameters for call to function strlen
   \   000031   EE           MOV     A,R6
   \   000032   FA           MOV     R2,A
   \   000033   EF           MOV     A,R7
   \   000034   FB           MOV     R3,A
   \   000035   12....       LCALL   ??strlen?relay
   \   000038   EA           MOV     A,R2
   \   000039   F8           MOV     R0,A
   \   00003A   85..82       MOV     DPL,?XSP + 0
   \   00003D   85..83       MOV     DPH,?XSP + 1
   \   000040   12....       LCALL   ?Subroutine16 & 0xFFFF
    820            switch (option)
   \                     ??CrossCallReturnLabel_29:
   \   000043   E5..         MOV     A,?V0 + 3
   \   000045   14           DEC     A
   \   000046   600F         JZ      ??HalLcdWriteString_0
   \   000048   14           DEC     A
   \   000049   600C         JZ      ??HalLcdWriteString_0
   \   00004B   14           DEC     A
   \   00004C   6009         JZ      ??HalLcdWriteString_0
   \   00004E   14           DEC     A
   \   00004F   6006         JZ      ??HalLcdWriteString_0
   \   000051   14           DEC     A
   \   000052   6003         JZ      ??HalLcdWriteString_0
   \   000054   14           DEC     A
   \   000055   702E         JNZ     ??HalLcdWriteString_1
    821            {
    822              case 1:
    823              case 2:
    824              case 3:      
    825              case 4:     
    826              case 5:    
    827              case 6:
    828                 HalLcdClearLine( option%7 );
   \                     ??HalLcdWriteString_0:
   \   000057   E5..         MOV     A,?V0 + 3
   \   000059   75F007       MOV     B,#0x7
   \   00005C   84           DIV     AB
   \   00005D   AEF0         MOV     R6,B
   \   00005F                ; Setup parameters for call to function HalLcdClearLine
   \   00005F   EE           MOV     A,R6
   \   000060   F9           MOV     R1,A
   \   000061   12....       LCALL   ??HalLcdClearLine?relay
    829                 Print8(option%7,0,(unsigned char *)LcdBuf,1);
   \   000064                ; Setup parameters for call to function Print8
   \   000064   75..01       MOV     ?V0 + 0,#0x1
   \   000067   75..00       MOV     ?V0 + 1,#0x0
   \   00006A   78..         MOV     R0,#?V0 + 0
   \   00006C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00006F   7402         MOV     A,#0x2
   \   000071   12....       LCALL   ?XSTACK_DISP0_8
   \   000074   8582..       MOV     ?V0 + 0,DPL
   \   000077   8583..       MOV     ?V0 + 1,DPH
   \   00007A   78..         MOV     R0,#?V0 + 0
   \   00007C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00007F   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_37:
   \   000082   12....       LCALL   ?DEALLOC_XSTACK8
    830               /*  y = option%7;
    831                 x = 0;
    832          	while(LcdBuf[ii] != '\0')
    833          	{
    834          		adder = (LcdBuf[ii] - 0x20) * 16;
    835          
    836          		for(wm = 0;wm < 8;wm++)
    837          		{
    838          			SetRamAddr(y , x);
    839          			if(yn == 0)
    840          			{
    841          				WriteLCD(DATA, ~Font8X8[adder]);
    842          			}
    843          			else
    844          			{
    845          				WriteLCD(DATA, Font8X8[adder]);
    846          			}
    847          			adder += 1;
    848          			x += 1;
    849          		}
    850          		y += 1;
    851          		x -= 8;
    852          		for(wm = 0;wm < 8;wm++)
    853          		{
    854          			SetRamAddr(y , x);
    855          			if(yn == 0)
    856          			{
    857          				WriteLCD(DATA, ~Font8X8[adder]);
    858          			}
    859          			else
    860          			{
    861          				WriteLCD(DATA, Font8X8[adder]);	
    862          			}
    863          			adder += 1;
    864          			x += 1;
    865          		}
    866          		ii += 1;
    867          		y -= 1;
    868          	}*/
    869                //Print8(option%7,0,(unsigned char *)LcdBuf,1);
    870                break;
    871              default :
    872                break;
    873            }
    874          }
   \                     ??HalLcdWriteString_1:
   \   000085   7414         MOV     A,#0x14
   \   000087   12....       LCALL   ?DEALLOC_XSTACK8
   \   00008A   7F04         MOV     R7,#0x4
   \   00008C   02....       LJMP    ?BANKED_LEAVE_XDATA
    875          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    876          void HalLcdWriteValue ( uint32 value, const uint8 radix, uint8 option)
   \                     HalLcdWriteValue:
    877          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    878          ;
    879          }
   \   000000   02....       LJMP    ?BRET
    880          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    881          void HalLcdWriteScreen( char *line1, char *line2 )
   \                     HalLcdWriteScreen:
    882          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    883          #if (HAL_LCD == TRUE)
    884            HalLcdWriteString( line1, 3 );
    885            HalLcdWriteString( line2, 5 );
    886          #endif
    887          
    888          }
   \   000000   02....       LJMP    ?BRET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    889          void HalLcdWriteStringValue( char *title, uint16 value, uint8 format, uint8 line )
   \                     HalLcdWriteStringValue:
    890          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    891          ;
    892          }
   \   000000   02....       LJMP    ?BRET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    893          void HalLcdWriteStringValueValue( char *title, uint16 value1, uint8 format1,
   \                     HalLcdWriteStringValueValue:
    894                                            uint16 value2, uint8 format2, uint8 line )
    895          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    896          ;
    897          }
   \   000000   02....       LJMP    ?BRET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    898          void upLcd( char *ptr,uint8 op )
   \                     upLcd:
    899          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
    900            HalLcdWriteString(ptr,op);
   \   000005                ; Setup parameters for call to function HalLcdWriteString
   \   000005   12....       LCALL   ??HalLcdWriteString?relay
    901          }
   \   000008   02....       LJMP    ??Subroutine21_0 & 0xFFFF
    902          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    903          void kaijijiemian(void)
   \                     kaijijiemian:
    904          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    905          
    906               // P1DIR &= (0 << 0)|(0 << 1)|(0 << 2)|(0 << 3);
    907                delay(10);
   \   000004                ; Setup parameters for call to function delay
   \   000004   7A0A         MOV     R2,#0xa
   \   000006   7B00         MOV     R3,#0x0
   \   000008   12....       LCALL   ??delay?relay
    908                HalLcdInit();
   \   00000B                ; Setup parameters for call to function HalLcdInit
   \   00000B   12....       LCALL   ??HalLcdInit?relay
    909                delay(100);
   \   00000E                ; Setup parameters for call to function delay
   \   00000E   7A64         MOV     R2,#0x64
   \   000010   12....       LCALL   ?Subroutine13 & 0xFFFF
    910          	 
    911                              delay(200); delay(200);
    912          		    Test(); 
   \                     ??CrossCallReturnLabel_21:
   \   000013                ; Setup parameters for call to function Test
   \   000013   12....       LCALL   ??Test?relay
    913                              delay(20);
   \   000016                ; Setup parameters for call to function delay
   \   000016   7A14         MOV     R2,#0x14
   \   000018                REQUIRE ?Subroutine0
   \   000018                ; // Fall through to label ?Subroutine0
    914                        
    915                          
    916                          
    917          }
    918          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    919          void Test(void)
   \                     Test:
    920          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    921                
    922                  write_com(0x80);
   \   000004                ; Setup parameters for call to function write_com
   \   000004   12....       LCALL   ?Subroutine6 & 0xFFFF
    923                  print_LCDdata("青岛东合信息技术");
    924          	//write_com(0x92);
    925          	//write_data("有限公司");
    926          	write_com(0x91);
    927          	print_LCDdata("网络建立成功");
   \                     ??CrossCallReturnLabel_4:
   \   000007                ; Setup parameters for call to function print_LCDdata
   \   000007   7A..         MOV     R2,#`?<Constant "\\315\\370\\302\\347\\275\\250\\301\\242\\2` & 0xff
   \   000009   7B..         MOV     R3,#(`?<Constant "\\315\\370\\302\\347\\275\\250\\301\\242\\2` >> 8) & 0xff
   \   00000B   12....       LCALL   ??print_LCDdata?relay
    928          	write_com(0x88);
   \   00000E                ; Setup parameters for call to function write_com
   \   00000E   7988         MOV     R1,#-0x78
   \   000010   12....       LCALL   ??write_com?relay
    929          	print_LCDdata("SHORTADDR:0x0000");
   \   000013                ; Setup parameters for call to function print_LCDdata
   \   000013   7A..         MOV     R2,#`?<Constant "SHORTADDR:0x0000">` & 0xff
   \   000015   7B..         MOV     R3,#(`?<Constant "SHORTADDR:0x0000">` >> 8) & 0xff
   \   000017   12....       LCALL   ??print_LCDdata?relay
    930          }
   \   00001A   80..         SJMP    ??Subroutine24_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   7980         MOV     R1,#-0x80
   \   000002   12....       LCALL   ??write_com?relay
   \   000005                ; Setup parameters for call to function print_LCDdata
   \   000005                ; Setup parameters for call to function print_LCDdata
   \   000005   7A..         MOV     R2,#`?<Constant "\\307\\340\\265\\272\\266\\253\\272\\317\\3` & 0xff
   \   000007   7B..         MOV     R3,#(`?<Constant "\\307\\340\\265\\272\\266\\253\\272\\317\\3` >> 8) & 0xff
   \   000009   12....       LCALL   ??print_LCDdata?relay
   \   00000C                ; Setup parameters for call to function write_com
   \   00000C                ; Setup parameters for call to function write_com
   \   00000C   7991         MOV     R1,#-0x6f
   \   00000E   12....       LCALL   ??write_com?relay
   \   000011   22           RET
    931          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    932          void Router_Join(unsigned char s)
   \                     Router_Join:
    933          {        
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
    934            
    935                  ClearScreen();
   \   000007                ; Setup parameters for call to function ClearScreen
   \   000007   12....       LCALL   ??ClearScreen?relay
    936                  write_com(0x80);
   \   00000A                ; Setup parameters for call to function write_com
   \   00000A   12....       LCALL   ?Subroutine6 & 0xFFFF
    937                  print_LCDdata("青岛东合信息技术");
    938          	//write_com(0x92);
    939          	//write_data("有限公司");
    940          	write_com(0x91);
    941          	print_LCDdata("Router");
   \                     ??CrossCallReturnLabel_5:
   \   00000D                ; Setup parameters for call to function print_LCDdata
   \   00000D   7A..         MOV     R2,#`?<Constant "Router">` & 0xff
   \   00000F   7B..         MOV     R3,#(`?<Constant "Router">` >> 8) & 0xff
   \   000011   12....       LCALL   ??print_LCDdata?relay
    942                  write_com(0x95);
   \   000014                ; Setup parameters for call to function write_com
   \   000014   7995         MOV     R1,#-0x6b
   \   000016   12....       LCALL   ??write_com?relay
    943                  write_data(s);
   \   000019                ; Setup parameters for call to function write_data
   \   000019   EE           MOV     A,R6
   \   00001A   F9           MOV     R1,A
   \   00001B   12....       LCALL   ??write_data?relay
    944          	write_com(0x89);
   \   00001E                ; Setup parameters for call to function write_com
   \   00001E   7989         MOV     R1,#-0x77
   \   000020   12....       LCALL   ??write_com?relay
    945          	print_LCDdata("JoinSuccess");
   \   000023                ; Setup parameters for call to function print_LCDdata
   \   000023   7A..         MOV     R2,#`?<Constant "JoinSuccess">` & 0xff
   \   000025   7B..         MOV     R3,#(`?<Constant "JoinSuccess">` >> 8) & 0xff
   \   000027   12....       LCALL   ??print_LCDdata?relay
    946               
    947          }
   \   00002A   02....       LJMP    ??Subroutine21_0 & 0xFFFF

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for ContrastValue>`:
   \   000000   5A           DB 90

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??delay1?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    delay1

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??delay_us?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    delay_us

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Write595?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Write595

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??WriteLCD?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    WriteLCD

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SetRamAddr?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SetRamAddr

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SetContrast?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SetContrast

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??InitDisplay?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    InitDisplay

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??contrastctrl?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    contrastctrl

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ClearScreen?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ClearScreen

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??delay?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    delay

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??sendbyte?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    sendbyte

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??write_com?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    write_com

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??write_data?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    write_data

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??print_LCDdata?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    print_LCDdata

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdInit?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdInit

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Print6?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Print6

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Printn8?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Printn8

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??PrintCh8?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    PrintCh8

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Print8?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Print8

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Print?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Print

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdClearLine?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdClearLine

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdWriteString?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdWriteString

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdWriteValue?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdWriteValue

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdWriteScreen?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdWriteScreen

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdWriteStringValue?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdWriteStringValue

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdWriteStringValueValue?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdWriteStringValueValue

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??upLcd?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    upLcd

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??kaijijiemian?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    kaijijiemian

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Test?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Test

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Router_Join?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Router_Join

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "                ">`:
   \   000000   20202020     DB "                "
   \            20202020
   \            20202020
   \            20202020
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\307\\340\\265\\272\\266\\253\\272\\317\\3`:
   \   000000   C7E0B5BA     DB "\307\340\265\272\266\253\272\317\320\305\317\242\274\274\312\365"
   \            B6ABBACF
   \            D0C5CFA2
   \            BCBCCAF5
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\315\\370\\302\\347\\275\\250\\301\\242\\2`:
   \   000000   CDF8C2E7     DB "\315\370\302\347\275\250\301\242\263\311\271\246"
   \            BDA8C1A2
   \            B3C9B9A6
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "SHORTADDR:0x0000">`:
   \   000000   53484F52     DB "SHORTADDR:0x0000"
   \            54414444
   \            523A3078
   \            30303030
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Router">`:
   \   000000   526F7574     DB "Router"
   \            657200  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "JoinSuccess">`:
   \   000000   4A6F696E     DB "JoinSuccess"
   \            53756363
   \            65737300

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_a:
   \   000000   0A000000     DD 10
    948          
    949          

   Maximum stack usage in bytes:

     Function                    ISTACK PSTACK XSTACK
     --------                    ------ ------ ------
     ClearScreen                     2      0      9
       -> write_com                  4      0      0
       -> delay                      4      0      0
       -> write_com                  4      0      0
       -> delay                      4      0      0
       -> delay                      4      0      0
       -> delay                      4      0      0
       -> delay                      4      0      0
       -> delay                      4      0      0
       -> delay                      4      0      0
     HalLcdClearLine                 0      0     46
       -> Print8                     0      0     28
     HalLcdInit                      2      0      0
       -> delay                      4      0      0
       -> write_com                  4      0      0
       -> delay                      4      0      0
       -> write_com                  4      0      0
       -> delay                      4      0      0
       -> write_com                  4      0      0
       -> delay                      4      0      0
       -> write_com                  4      0      0
       -> delay                      4      0      0
     HalLcdWriteScreen               0      0      0
     HalLcdWriteString               0      0     45
       -> osal_memcpy                0      0     70
       -> strlen                     0      0     64
       -> HalLcdClearLine            0      0     64
       -> Print8                     0      0     72
     HalLcdWriteStringValue          0      0      1
     HalLcdWriteStringValueValue     0      0      4
     HalLcdWriteValue                0      0      1
     InitDisplay                     2      0      0
       -> WriteLCD                   4      0      0
       -> WriteLCD                   4      0      0
       -> WriteLCD                   4      0      0
       -> SetContrast                4      0      0
       -> WriteLCD                   4      0      0
       -> WriteLCD                   4      0      0
     Print                           1      0     25
       -> Print8                     0      0     46
     Print6                          0      0     16
       -> WriteLCD                   0      0     32
       -> SetRamAddr                 0      0     32
       -> WriteLCD                   0      0     32
     Print8                          0      0     51
       -> WriteLCD                   0      0     30
       -> SetRamAddr                 0      0     30
       -> WriteLCD                   0      0     30
       -> WriteLCD                   0      0     30
       -> SetRamAddr                 0      0     30
       -> WriteLCD                   0      0     30
     PrintCh8                        0      0     17
       -> SetRamAddr                 0      0     30
       -> WriteLCD                   0      0     30
       -> WriteLCD                   0      0     30
       -> SetRamAddr                 0      0     30
       -> WriteLCD                   0      0     30
       -> WriteLCD                   0      0     30
     Printn8                         1      0     34
       -> Print8                     0      0     60
     Router_Join                     0      0      9
       -> ClearScreen                0      0     18
       -> write_com                  0      0     18
       -> print_LCDdata              0      0     18
       -> write_com                  0      0     18
       -> print_LCDdata              0      0     18
       -> write_com                  0      0     18
       -> write_data                 0      0     18
       -> write_com                  0      0     18
       -> print_LCDdata              0      0     18
     SetContrast                     0      0     18
       -> WriteLCD                   0      0     18
       -> WriteLCD                   0      0     18
       -> WriteLCD                   0      0     18
     SetRamAddr                      0      0     25
       -> WriteLCD                   0      0     18
       -> WriteLCD                   0      0     18
       -> WriteLCD                   0      0     18
     Test                            2      0      0
       -> write_com                  4      0      0
       -> print_LCDdata              4      0      0
       -> write_com                  4      0      0
       -> print_LCDdata              4      0      0
       -> write_com                  4      0      0
       -> print_LCDdata              4      0      0
     Write595                        0      0      9
     WriteLCD                        0      0     25
       -> delay1                     0      0     18
       -> Write595                   0      0     18
       -> delay1                     0      0     18
     contrastctrl                    0      0      9
       -> SetContrast                0      0     18
       -> delay_us                   0      0     18
       -> SetContrast                0      0     18
       -> delay_us                   0      0     18
     delay                           0      0      9
     delay1                          0      0      9
     delay_us                        0      0      9
     kaijijiemian                    2      0      0
       -> delay                      4      0      0
       -> HalLcdInit                 4      0      0
       -> delay                      4      0      0
       -> delay                      4      0      0
       -> delay                      4      0      0
       -> Test                       4      0      0
       -> delay                      4      0      0
     print_LCDdata                   0      0     18
       -> sendbyte                   0      0     18
       -> sendbyte                   0      0     18
       -> sendbyte                   0      0     18
       -> delay                      0      0     18
     sendbyte                        2      0      9
     upLcd                           0      0      9
       -> HalLcdWriteString          0      0     18
     write_com                       0      0     18
       -> sendbyte                   0      0     18
       -> sendbyte                   0      0     18
       -> sendbyte                   0      0     18
       -> delay                      0      0     18
     write_data                      0      0     18
       -> delay                      0      0     18
       -> sendbyte                   0      0     18
       -> sendbyte                   0      0     18
       -> sendbyte                   0      0     18
       -> delay                      0      0     18


   Segment part sizes:

     Function/Label                                 Bytes
     --------------                                 -----
     _A_P0                                             1
     _A_P1                                             1
     _A_P2                                             1
     P1DIR                                             1
     ContrastValue                                     1
     i                                                 2
     delay1                                           13
     delay_us                                         67
     ?Subroutine7                                      9
     Write595                                         31
     WriteLCD                                         46
     ??Subroutine21_0                                  5
     SetRamAddr                                       37
     ?Subroutine1                                      7
     SetContrast                                      32
     InitDisplay                                      49
     ??Subroutine24_0                                  7
     contrastctrl                                     63
     ClearScreen                                      27
     ?Subroutine17                                    11
     ?Subroutine0                                      5
     ?Subroutine13                                     9
     ?Subroutine19                                    15
     delay                                            20
     sendbyte                                         71
     write_com                                        21
     ?Subroutine4                                      4
     ?Subroutine8                                     19
     write_data                                       30
     print_LCDdata                                    65
     HalLcdInit                                       39
     ?Subroutine9                                     11
     Print6                                          118
     ??Subroutine22_0                                  5
     Printn8                                         220
     ?Subroutine2                                      3
     ??Subroutine23_0                                  8
     ?Subroutine16                                    14
     PrintCh8                                         73
     ?Subroutine3                                      5
     ?Subroutine11                                     6
     ?Subroutine15                                    14
     ?Subroutine14                                     8
     ?Subroutine20                                    23
     ?Subroutine5                                     27
     Print8                                          101
     ?Subroutine12                                     6
     ?Subroutine10                                     9
     Print                                           157
     HalLcdClearLine                                  40
     ?Subroutine18                                     8
     HalLcdWriteString                               143
     HalLcdWriteValue                                  3
     HalLcdWriteScreen                                 3
     HalLcdWriteStringValue                            3
     HalLcdWriteStringValueValue                       3
     upLcd                                            11
     kaijijiemian                                     24
     Test                                             28
     ?Subroutine6                                     18
     Router_Join                                      45
     ?<Initializer for ContrastValue>                  1
     ??delay1?relay                                    6
     ??delay_us?relay                                  6
     ??Write595?relay                                  6
     ??WriteLCD?relay                                  6
     ??SetRamAddr?relay                                6
     ??SetContrast?relay                               6
     ??InitDisplay?relay                               6
     ??contrastctrl?relay                              6
     ??ClearScreen?relay                               6
     ??delay?relay                                     6
     ??sendbyte?relay                                  6
     ??write_com?relay                                 6
     ??write_data?relay                                6
     ??print_LCDdata?relay                             6
     ??HalLcdInit?relay                                6
     ??Print6?relay                                    6
     ??Printn8?relay                                   6
     ??PrintCh8?relay                                  6
     ??Print8?relay                                    6
     ??Print?relay                                     6
     ??HalLcdClearLine?relay                           6
     ??HalLcdWriteString?relay                         6
     ??HalLcdWriteValue?relay                          6
     ??HalLcdWriteScreen?relay                         6
     ??HalLcdWriteStringValue?relay                    6
     ??HalLcdWriteStringValueValue?relay               6
     ??upLcd?relay                                     6
     ??kaijijiemian?relay                              6
     ??Test?relay                                      6
     ??Router_Join?relay                               6
     ?<Constant "                ">                   17
     ?<Constant "\307\340\265\272\266\253\272\317\3   17
     ?<Constant "\315\370\302\347\275\250\301\242\2   13
     ?<Constant "SHORTADDR:0x0000">                   17
     ?<Constant "Router">                              7
     ?<Constant "JoinSuccess">                        12
     __Constant_a                                      4

 
 1 839 bytes in segment BANKED_CODE
   180 bytes in segment BANK_RELAYS
     4 bytes in segment SFR_AN
     1 byte  in segment XDATA_I
     1 byte  in segment XDATA_ID
    87 bytes in segment XDATA_ROM_C
     2 bytes in segment XDATA_Z
 
 2 020 bytes of CODE  memory
    83 bytes of CONST memory (+ 4 bytes shared)
     0 bytes of DATA  memory (+ 4 bytes shared)
     3 bytes of XDATA memory

Errors: none
Warnings: none
